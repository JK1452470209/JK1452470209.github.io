<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Mr.JK">
  <meta name="keywords" content="">
  <title>学成在线day02：CMS前端开发 - Mr.JK</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/darcula.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/custom.css">



  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>





<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>私人博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于我
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/banner.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-08-08 11:48">
      2020-08-08
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      65
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
	
   
	
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h1 id="😎知识点概览"><a href="#😎知识点概览" class="headerlink" title="😎知识点概览"></a>😎知识点概览</h1><blockquote>
<p>为了方便后续回顾该项目时能够清晰的知道本章节讲了哪些内容，并且能够从该章节的笔记中得到一些帮助，所以在完成本章节的学习后在此对本章节所涉及到的知识点进行总结概述。</p>
</blockquote>
<p>本章节为【学成在线】项目的 <code>day02</code> 的内容</p>
<ul>
<li><code>vue</code> 基础语法</li>
<li>对 <code>webpack</code>与 <code>webpack-dev-server</code> 的基本使用，理解 <code>webpack</code> 的打包过程。</li>
<li><code>CMS</code> 前端工程的基础构建</li>
<li>解决前端跨域请求的问题，并理解前端请求数据的流程。</li>
<li>配合使用 <code>Element-UI</code> 的 <code>table</code> 组件进行分页查询</li>
</ul>
<h1 id="一、vue基础"><a href="#一、vue基础" class="headerlink" title="一、vue基础"></a>一、vue基础</h1><p>vue基础部分内容的笔记略过，如过你仍需要该阶段的学习，阅读官方的讲义或者移步：<a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener">https://cn.vuejs.org/v2/guide/</a> 进行阅读和练习。</p>
<h1 id="二、webpack入门"><a href="#二、webpack入门" class="headerlink" title="二、webpack入门"></a>二、webpack入门</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>使用vue.js开发大型应用需要使用 <code>webpack</code> 打包工具，本节研究webpack的使用方法。</p>
<p>Webpack 是一个前端资源的打包工具，它可以将js、image、css等资源当成一个模块进行打包。</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image7.png" srcset="/img/loading.gif" alt></p>
<h2 id="2-使用webpack有什么好处呢？"><a href="#2-使用webpack有什么好处呢？" class="headerlink" title="2. 使用webpack有什么好处呢？"></a>2. 使用webpack有什么好处呢？</h2><p>从图中我们可以看出，Webpack 可以将js、css、png等多种静态资源 进行打包</p>
<ul>
<li>模块化开发<br>程序员在开发时可以分模块创建不同的js、 css等小文件方便开发，最后使用webpack将这些小文件打包成一个文<br>件，减少了http的请求次数。<br>webpack可以实现按需打包，为了避免出现打包文件过大可以打包成多个文件。</li>
<li>编译typescript、ES6等高级js语法<br>随着前端技术的强大，开发中可以使用javascript的很多高级版本，比如：typescript、ES6等，方便开发，<br>webpack可以将打包文件转换成浏览器可识别的js语法。</li>
<li>CSS预编译<br>webpack允许在开发中使用Sass 和 Less等原生CSS的扩展技术，通过sass-loader、less-loader将Sass 和 Less的<br>语法编译成浏览器可识别的css语法。</li>
</ul>
<h2 id="3-webpack的缺点"><a href="#3-webpack的缺点" class="headerlink" title="3. webpack的缺点"></a>3. webpack的缺点</h2><p>1、配置有些繁琐<br>2、文档不丰富</p>
<h2 id="4-安装-npm"><a href="#4-安装-npm" class="headerlink" title="4.安装 npm"></a>4.安装 npm</h2><p><code>node.js</code> 已经集成了npm工具，在命令提示符输入 npm -v 可查看当前npm版本，node可以直接去官网下载安装</p>
<p>设置包路径</p>
<div class="hljs"><pre><code class="hljs shell">npm config set prefix "C:\Program Files\nodejs\npm_modules"
npm config set cache "c:\Program Files\nodejs\npm_cache"</code></pre></div>

<h2 id="5-安装-cnpm"><a href="#5-安装-cnpm" class="headerlink" title="5. 安装 cnpm"></a>5. 安装 cnpm</h2><p>执行以下命令</p>
<div class="hljs"><pre><code class="hljs shell">npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre></div>

<p>安装完成后执行命令 <code>cnpm -v</code></p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image8.png" srcset="/img/loading.gif" alt></p>
<h2 id="6-安装-webpack"><a href="#6-安装-webpack" class="headerlink" title="6. 安装 webpack"></a>6. 安装 webpack</h2><p><strong>node.js 安装包分为两种模式</strong></p>
<ul>
<li>本地安装：仅将webpack安装在当前项目的node_modules目录中，仅对当前项目有效。</li>
<li>全局安装：将webpack安装在本机，对所有项目有效，全局安装会锁定一个webpack版本，该版本可能不适用某个项目。全局安装需要添加 -g 参数</li>
</ul>
<p><strong>本地安装</strong></p>
<div class="hljs"><pre><code class="hljs shell">npm install --save-dev webpack 或 cnpm install --save-dev webpack
npm install --save-dev webpack-cli (4.0以后的版本需要安装webpack-cli)</code></pre></div>

<p><strong>全局安装</strong></p>
<p>全局安装加-g，如下：全局安装就将webpack的js包下载到npm的包路径下。</p>
<div class="hljs"><pre><code class="hljs shell">npm install webpack -g 或 cnpm install webpack -g</code></pre></div>

<p><strong>安装 webpack 指定的版本：</strong><br>进入webpacktest测试目录，运行：<code>cnpm install --save-dev webpack@3.6.0</code><br>全局安装：<code>npm install webpack@3.6.0 -g</code> 或 <code>cnpm install webpack@3.6.0 -g</code></p>
<h2 id="7-入门程序"><a href="#7-入门程序" class="headerlink" title="7. 入门程序"></a>7. 入门程序</h2><p>通过本入门程序体会webpack打包的过程及模块化开发的思想。</p>
<h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><p>通过入门程序实现对js文件的打包，体会webpack是如何对应用进行模块化管理。<br>对上边1+1=2的例子使用webpack进行模块化管理</p>
<h3 id="定义-model01-js"><a href="#定义-model01-js" class="headerlink" title="定义 model01.js"></a>定义 model01.js</h3><p>在<code>webpacktest01</code>目录下创建<code>model01.js</code></p>
<p>将本程序使用的加法运算的js方法抽取到一个js文件，此文件就是一个模块 ，代码如下</p>
<div class="hljs"><pre><code class="hljs javascript"><span class="hljs-comment">//定义add函数</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>) </span>&#123;
    <span class="hljs-keyword">return</span> x+y;
&#125;

<span class="hljs-comment">//导出add函数</span>
<span class="hljs-built_in">module</span>.exports.add = add;</code></pre></div>

<h3 id="定义main-js"><a href="#定义main-js" class="headerlink" title="定义main.js"></a>定义main.js</h3><p>在<code>webpacktest01</code>目录下创建<code>main.js</code>，<code>main.js</code>是本程序的js主文件，包括如下内容：</p>
<p>1、在此文件中会引用model01.js模块<br>2、引用vue.min.js（它也一个模块）<br>3、将html页面中构建vue实例的代码放在main.js中。</p>
<div class="hljs"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> &#123;add&#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./model01.js"</span>)
<span class="hljs-keyword">var</span> Vue = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./vue.min"</span>)

<span class="hljs-comment">// 实例化Vue对象</span>
<span class="hljs-comment">//vm :叫做MVVM中的 View Model</span>
<span class="hljs-keyword">var</span> VM = <span class="hljs-keyword">new</span> Vue(&#123;
    el:<span class="hljs-string">"#app"</span>,<span class="hljs-comment">//表示当前vue对象接管app的div区域</span>
    data:&#123;
        name:<span class="hljs-string">'黑马程序员'</span>,<span class="hljs-comment">// 相当于是MVVM中的Model这个角色</span>
        num1:<span class="hljs-number">0</span>,
        num2:<span class="hljs-number">0</span>,
        result:<span class="hljs-number">0</span>,
        url:<span class="hljs-string">'http://www.itcast.cn'</span>
    &#125;,
    methods:&#123;
        change:<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
            <span class="hljs-keyword">this</span>.result = add(<span class="hljs-built_in">Number</span>.parseInt(<span class="hljs-keyword">this</span>.num1),<span class="hljs-built_in">Number</span>.parseInt(<span class="hljs-keyword">this</span>.num2));
        &#125;
    &#125;
&#125;);</code></pre></div>

<h3 id="打包测试"><a href="#打包测试" class="headerlink" title="打包测试"></a>打包测试</h3><p>上边将 <code>mode01.js</code> 模块及 <code>main.js</code> 主文件编写完成，下边使用 <code>webpack</code> 对这些js文件进行打包</p>
<p>1、进入程序目录，执行 <code>webpack main.js -o build.js</code> ，这段指令表示将 <code>main.js</code> 打包输出为 <code>build.js</code> 文件执行完成，观察程序目录是否出现 <code>build.js</code>。</p>
<p>2、在创建一个html ，这里我命名为 <code>vue_02.html</code> 并 中引用 <code>build.js</code></p>
<div class="hljs"><pre><code class="hljs java">&lt;!DOCTYPE html&gt;
&lt;html lang=<span class="hljs-string">"en"</span> xmlns:v-on=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span>&gt;
&lt;head&gt;
    &lt;meta http-equiv=<span class="hljs-string">"Content-Type"</span> content=<span class="hljs-string">"text/html; charset=utf-8"</span> /&gt;
    &lt;title&gt;vue.js入门程序&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=<span class="hljs-string">"app"</span>&gt;
    &#123;&#123;name&#125;&#125;
    &lt;input type=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"num1"</span>&gt;+
    &lt;input type=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"num2"</span>&gt;=
    &lt;input type=<span class="hljs-string">"text"</span> v-model=<span class="hljs-string">"result"</span>&gt;
    &lt;button v-on:click="change"&gt;计算&lt;/button&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;script src="build.js"&gt;&lt;/script&gt;
&lt;/html&gt;</code></pre></div>

<h3 id="运行html"><a href="#运行html" class="headerlink" title="运行html"></a>运行html</h3><p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image9.png" srcset="/img/loading.gif" alt></p>
<h1 id="三、webpack-dev-server"><a href="#三、webpack-dev-server" class="headerlink" title="三、webpack-dev-server"></a>三、webpack-dev-server</h1><h2 id="1-测试环境搭建"><a href="#1-测试环境搭建" class="headerlink" title="1. 测试环境搭建"></a>1. 测试环境搭建</h2><p><code>webpack-dev-server</code> 开发服务器，它的功能可以实现热加载 并且自动刷新浏览器。</p>
<p>创建一个新的程序目录，这里我们创建 <code>webpacktest02</code> 目录，将 <code>webpack</code> 入门程序( <code>webpacktest01</code> )的代码拷贝进来，并在目录下创建 <code>src</code> 目录、<code>dist</code> 目录，并将main.js和model01.js拷贝到src目录。</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image10.png" srcset="/img/loading.gif" alt></p>
<h2 id="2-安装配置"><a href="#2-安装配置" class="headerlink" title="2. 安装配置"></a>2. 安装配置</h2><h3 id="安装webpack-dev-server"><a href="#安装webpack-dev-server" class="headerlink" title="安装webpack-dev-server"></a>安装webpack-dev-server</h3><p>使用 <code>webpack-dev-server</code> 需要安装webpack、 webpack-dev-server 和 html-webpack-plugin三个包。</p>
<div class="hljs"><pre><code class="hljs shell">cnpm install webpackwebpack-dev-server html-webpack-plugin</code></pre></div>

<p>安装完成，会发现程序目录出现一个package.json文件，此文件中记录了程序的依赖。</p>
<h3 id="配置webpack-dev-server"><a href="#配置webpack-dev-server" class="headerlink" title="配置webpack-dev-server"></a>配置webpack-dev-server</h3><p>在package.json中配置script</p>
<div class="hljs"><pre><code class="hljs json">"scripts": &#123;
  "dev": "webpack-dev-server --inline --hot --open --port 5008"
&#125;</code></pre></div>

<p>–inline：自动刷新<br>–hot：热加载<br>–port：指定端口<br>–open：自动在默认浏览器打开<br>–host：可以指定服务器的 ip，不指定则为127.0.0.1，如果对外发布则填写公网ip地址</p>
<p>此时package.json的文件内容如下：</p>
<div class="hljs"><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"devDependencies"</span>: &#123;
    <span class="hljs-attr">"html-webpack-plugin"</span>: <span class="hljs-string">"^3.2.0"</span>,
    <span class="hljs-attr">"webpack-dev-server"</span>: <span class="hljs-string">"^3.10.3"</span>
  &#125;,
  <span class="hljs-attr">"scripts"</span>: &#123;
    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"webpack-dev-server --inline --hot --open --port 5008"</span>
  &#125;
&#125;</code></pre></div>

<blockquote>
<p>devDependencies：开发人员在开发过程中所需要的依赖。<br>scripts：可执行的命令</p>
</blockquote>
<h2 id="3-webpack-config-js"><a href="#3-webpack-config-js" class="headerlink" title="3. webpack.config.js"></a>3. webpack.config.js</h2><p>在 <code>webpacktest02</code> 目录下创建 <code>webpack.config.js</code>， <code>webpack.config.js</code> 是 <code>webpack</code> 的配置文件。</p>
<p>在此文件中可以配置应用的入口文件、输出配置、插件等，其中要实现热加载自动刷新功能需要配置 <code>html-webpack-plugin</code> 插件。</p>
<p><code>html-webpack-plugin</code> 的作用是根据 <code>html</code> 模板在内存生成 <code>html</code> 文件，它的工作原理是根据模板文件在内存中生成一个 <code>index.html</code> 文件。</p>
<h3 id="配置模板文件"><a href="#配置模板文件" class="headerlink" title="配置模板文件"></a>配置模板文件</h3><p>将原来的 <code>vue_02.html</code> 作为模板文件，为了和内存中的 <code>index.html</code> 文件名区别，注意将 <code>vue_02.html</code> 中的<code>script</code> 标签去掉，内容如下：</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:v-on</span>=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"Content-Type"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"text/html; charset=utf-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>vue.js入门程序<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    &#123;&#123;name&#125;&#125;
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"num1"</span>&gt;</span>+
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"num2"</span>&gt;</span>=
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"result"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">"change"</span>&gt;</span>计算<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre></div>

<h3 id="配置-html-webpack-plugin"><a href="#配置-html-webpack-plugin" class="headerlink" title="配置 html-webpack-plugin"></a>配置 html-webpack-plugin</h3><p>在 <code>webpack.config.js</code> 中配置 <code>html-webpack-plugin</code> 插件</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">var</span> htmlwp = require(<span class="hljs-string">'html-webpack-plugin'</span>);
<span class="hljs-keyword">module</span>.<span class="hljs-keyword">exports</span>=&#123;
    entry:<span class="hljs-string">'./src/main.js'</span>, <span class="hljs-comment">//指定打包的入口文件</span>
    output:&#123;
        path : __dirname + <span class="hljs-string">'/dist'</span>, <span class="hljs-comment">// 注意：__dirname表示webpack.config.js所在目录的绝对路径</span>
        filename:<span class="hljs-string">'build.js'</span> <span class="hljs-comment">//输出文件</span>
    &#125;,
    plugins:[
        <span class="hljs-keyword">new</span> htmlwp(&#123;
            <span class="hljs-comment">//生成的页面标题&lt;head&gt;&lt;title&gt;首页&lt;/title&gt;&lt;/head&gt;</span>
            title: <span class="hljs-string">'首页'</span>,
            <span class="hljs-comment">//webpack-dev-server在内存中生成的文件名称，自动将build注入到这个页面底部才能实现自动刷新功能</span>
            filename: <span class="hljs-string">'index.html'</span>,
            <span class="hljs-comment">//根据vue_02.html这个模板来生成(这个文件请程序员自己生成)</span>
            template: <span class="hljs-string">'vue_02.html'</span>
        &#125;)
    ]
&#125;</code></pre></div>

<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>启动文件：<br>1、进入 <code>webpacktest02</code>目录，执行<code>npm run dev</code><br>2、使用webstorm，右键<code>package.json</code>文件，选择 “Show npm Scripts”</p>
<p>打开窗口：</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image11.png" srcset="/img/loading.gif" alt></p>
<p>双击 <code>dev</code>。<br>注意：dev 就是在 <code>package.json</code> 中配置的 <code>webpack dev server</code> 命令。<br>发现启动成功自动打开浏览器。<br>修改src中的任意文件内容，自动加载并刷新浏览器。</p>
<h3 id="debug调试"><a href="#debug调试" class="headerlink" title="debug调试"></a>debug调试</h3><p>使用了 <code>webpack</code> 之后就不能采用传统js的调试方法在 <code>chrome</code> 中打断点。</p>
<p><code>webpack</code> 将多个源文件打包成一个文件，并且文件的内容产生了很大的变化，<code>webpack</code> 提供 <code>devtool</code> 进行调试，<code>devtool</code> 是基于 <code>sourcemap</code> 的方式，在调试时会生成一个 <code>map</code> 文件，其内容记录生成文件和源文件的内容映射，即生成文件中的哪个位置对应源文件中的哪个位置，有了 <code>sourcemap</code> 就可以在调试时看到源代码。</p>
<p><strong>配置如下</strong></p>
<p>1、在webpack.config.js中配置：</p>
<div class="hljs"><pre><code class="hljs js">devtool: <span class="hljs-string">'eval‐source‐map'</span>,</code></pre></div>

<p>devtool: ‘eval‐source‐map’,</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">var</span> htmlwp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html‐webpack‐plugin'</span>);
    <span class="hljs-built_in">module</span>.exports=&#123;
    entry:<span class="hljs-string">'./src/main.js'</span>, <span class="hljs-comment">//指定打包的入口文件</span>
    output:&#123;
    path : __dirname+<span class="hljs-string">'/dist'</span>, <span class="hljs-comment">// 注意：__dirname表示webpack.config.js所在目录的绝对路径</span>
    filename:<span class="hljs-string">'build.js'</span> <span class="hljs-comment">//输出文件</span>
&#125;,
devtool: <span class="hljs-string">'eval‐source‐map'</span>,
......</code></pre></div>

<p>2、在js中跟踪代码的位置上添加debugger</p>
<p>一个例子：<br>在add方法中添加debugger</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">// 定义add函数</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">x, y</span>) </span>&#123;
    <span class="hljs-keyword">debugger</span>
    <span class="hljs-keyword">return</span> x + y
&#125;</code></pre></div>

<p>启动应用，刷新页面跟踪代码：<br>点击“计算” 即进入debugger代码位置，此时可以使用chrome进行调试了。</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image12.png" srcset="/img/loading.gif" alt></p>
<h3 id="无法正常启动调试？"><a href="#无法正常启动调试？" class="headerlink" title="无法正常启动调试？"></a>无法正常启动调试？</h3><p>谷歌浏览器中先按下 <code>F12</code> 打开调试模式后在点击 <code>计算</code> 按钮进行触发代码中的 <code>debugger</code></p>
<h1 id="四、CMS前端工程创建"><a href="#四、CMS前端工程创建" class="headerlink" title="四、CMS前端工程创建"></a>四、CMS前端工程创建</h1><h2 id="1-导入系统管理前端工程"><a href="#1-导入系统管理前端工程" class="headerlink" title="1.导入系统管理前端工程"></a>1.导入系统管理前端工程</h2><p>CMS系统使用Vue-cli脚手架创建， <code>Vue-cli</code>是 <code>Vue</code> 官方提供的快速构建单页应用的脚手架，<code>github</code>地址：<br><a href="https://github.com/vuejs/vue-cli%EF%BC%88%E6%9C%89%E5%85%B4%E8%B6%A3%E7%9A%84%E5%90%8C%E5%AD%A6%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E5%AE%98%E6%96%B9%E6%8C%87%E5%AF%BC%E4%BD%BF%E7%94%A8vue-cli%E5%88%9B%E5%BB%BA%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%EF%BC%89%EF%BC%8C%E6%9C%AC%E9%A1%B9%E7%9B%AE%E5%AF%B9" target="_blank" rel="noopener">https://github.com/vuejs/vue-cli（有兴趣的同学可以参考官方指导使用vue-cli创建前端工程），本项目对</a> <code>Vue-cli</code>创建的工程进行二次封装，下边介绍CMS工程的情况。</p>
<h2 id="2-工程结构"><a href="#2-工程结构" class="headerlink" title="2. 工程结构"></a>2. 工程结构</h2><p>如果我要基于Vue-Cli创建的工程进行开发还需要在它基础上作一些封装，导入课程资料中提供Vue-Cli封装工程。<br><code>资料/xc-ui-pc-sysmanage.7z</code> 拷贝到UI工程目录中，并解压，用<code>WebStorm</code>打开 <code>xc-ui-pc-sysmanage</code> 目录。</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image13.png" srcset="/img/loading.gif" alt></p>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>package.json记录了工程所有依赖，及脚本命令：</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image14.png" srcset="/img/loading.gif" alt></p>
<p>开发使用：<code>npm run dev</code><br>打包使用：<code>npm run build</code></p>
<h3 id="webpack-base-conf-js"><a href="#webpack-base-conf-js" class="headerlink" title="webpack.base.conf.js"></a>webpack.base.conf.js</h3><p><code>webpack.base.conf.js</code> 就是 webpack 的 <code>webpack.config.js</code> 配置文件，在此文件中配置了入口文件及各种<code>Loader</code>。webpack 是通过<code>vue-load</code>解析 <code>.vue</code> 文件，通过 <code>css-load</code> 打包 <code>css</code> 文件等。</p>
<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><p><code>main.js</code> 是工程的入口文件，在此文件中加载了很多第三方组件，如：Element-UI、Base64、VueRouter 等。<br><code>index.html</code> 是模板文件。</p>
<h3 id="src目录"><a href="#src目录" class="headerlink" title="src目录"></a>src目录</h3><p>src目录下存放页面及js代码。</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image15.png" srcset="/img/loading.gif" alt></p>
<ul>
<li>assets：存放一些静态文件，如图片。</li>
<li>base：存放基础组件</li>
<li>base/api：基础api接口</li>
<li>base/component：基础组件，被各各模块都使用的组件</li>
<li>base/router：总的路由配置，加载各模块的路由配置文件。</li>
<li>common：工具类</li>
<li>component：组件目录，本项目不用。</li>
<li>mock：存放前端单元测试方法。</li>
<li>module：存放各业务模块的页面和api方法。</li>
</ul>
<p>下级目录以模块名命名，下边以cms举例：</p>
<ul>
<li>cms/api：cms模块的api接口</li>
<li>cms/component：cms模块的组件</li>
<li>cms/page： cms模块的页面</li>
<li>cms/router：cms模块的路由配置</li>
<li>statics：存放第三方组件的静态资源</li>
<li>vuex：存放vuex文件，本项目不使用</li>
<li>static：与src的平级目录，此目录存放静态资源它与assets的区别在于，static目录中的文件不被webpack打包处理，会原样拷贝到dist目录下</li>
</ul>
<h2 id="3-单页面应用介绍"><a href="#3-单页面应用介绍" class="headerlink" title="3. 单页面应用介绍"></a>3. 单页面应用介绍</h2><h3 id="单页面应用的优缺点："><a href="#单页面应用的优缺点：" class="headerlink" title="单页面应用的优缺点："></a>单页面应用的优缺点：</h3><p><strong>优点</strong>：<br>1、用户操作体验好，用户不用刷新页面，整个交互过程都是通过Ajax来操作。<br>2、适合前后端分离开发，服务端提供http接口，前端请求http接口获取数据，使用JS进行客户端渲染。</p>
<p><strong>缺点</strong>：<br>1、首页加载慢<br>单页面应用会将js、 css打包成一个文件，在加载页面显示的时候加载打包文件，如果打包文件较大或者网速慢则<br>用户体验不好。</p>
<p>2、SEO不友好<br>SEO（Search Engine Optimization）为搜索引擎优化。它是一种利用搜索引擎的搜索规则来提高网站在搜索引擎<br>排名的方法。目前各家搜索引擎对JS支持不好，所以使用单页面应用将大大减少搜索引擎对网站的收录。</p>
<p>总结：本项目的门户、课程介绍不采用单页面应用架构去开发，对于需要用户登录的管理系统采用单页面开发。</p>
<h1 id="五、CMS前端页面查询开发"><a href="#五、CMS前端页面查询开发" class="headerlink" title="五、CMS前端页面查询开发"></a>五、CMS前端页面查询开发</h1><h2 id="1-页面原型"><a href="#1-页面原型" class="headerlink" title="1. 页面原型"></a>1. 页面原型</h2><h3 id="1、创建页面"><a href="#1、创建页面" class="headerlink" title="1、创建页面"></a>1、创建页面</h3><h4 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h4><p>在model目录创建 cms模块的目录结构</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image16.png" srcset="/img/loading.gif" alt></p>
<p>在page目录新建page_list.vue，扩展名为.vue。<br>.vue文件的结构如下：</p>
<div class="hljs"><pre><code class="hljs vue">&lt;template&gt;
&lt;!‐‐编写页面静态部分，即view部分‐‐&gt;
测试页面显示...
&lt;&#x2F;template&gt;
&lt;script&gt;
&#x2F;*编写页面静态部分，即model及vm部分。*&#x2F;
&lt;&#x2F;script&gt;
&lt;style&gt;
&#x2F;*编写页面样式，不是必须*&#x2F;
&lt;&#x2F;style&gt;</code></pre></div>

<p>在页面的<code>template</code>中填写 “测试页面显示…”。<br>注意：<code>template</code>内容必须有一个根元素，否则vue会报错，这里我们在<code>template</code>标签内定义一个<code>div</code>。</p>
<h4 id="页面路由"><a href="#页面路由" class="headerlink" title="页面路由"></a>页面路由</h4><p>在 <code>cms</code> 目录下创建 <code>page_list.vue</code> 页面。<br>现在先配置路由，实现 url 访问到页面再进行内容完善与调试。</p>
<p>1、在cms的router下配置路由</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Home <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/home/page/home.vue'</span>;
<span class="hljs-keyword">import</span> page_list <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/cms/page/page_list.vue'</span>;
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [&#123;
        path: <span class="hljs-string">'/cms'</span>,
        component: Home,
        name: <span class="hljs-string">'CMS内容管理'</span>,
        hidden: <span class="hljs-literal">false</span>,
        children:[
            &#123;<span class="hljs-attr">path</span>:<span class="hljs-string">'/cms/page/list'</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">'页面列表'</span>,<span class="hljs-attr">component</span>: page_list,<span class="hljs-attr">hidden</span>:<span class="hljs-literal">false</span>&#125;
        ]
    &#125;
]</code></pre></div>

<p>2、在base目录下的router导入cms模块的路由</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">// // 导入路由规则</span>
<span class="hljs-keyword">import</span> HomeRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/home/router'</span>
<span class="hljs-keyword">import</span> CmsRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/cms/router'</span>
<span class="hljs-comment">// 合并路由规则</span>
concat(HomeRouter)
concat(CmsRouter)</code></pre></div>

<p>3、测试</p>
<p>启动工程，刷新页面，页面可以外正常浏览，并且看到“测试页面显示…”字样</p>
<h3 id="2、Table组件测试"><a href="#2、Table组件测试" class="headerlink" title="2、Table组件测试"></a>2、Table组件测试</h3><p>本功能实现的页面列表，用户可以进行分页查询、输入查询条件查询，通过查看 <code>Element-UI</code> 库，我们需要<code>Table</code> 表格、<code>Form</code>表单 及<code>Pagination</code> 分页组件。</p>
<p>进入<a href="https://element.eleme.cn/#/zh-CN/component/table" target="_blank" rel="noopener">Element-UI</a>官方，找到 <code>Table</code> 组件，拷贝源代码到 <code>vue</code> 页面中，如下：</p>
<div class="hljs"><pre><code class="hljs vue">&lt;template&gt;
  &lt;div&gt;
    &lt;el-table
      :data&#x3D;&quot;tableData&quot;
      border
      style&#x3D;&quot;width: 100%&quot;&gt;
      &lt;el-table-column
        prop&#x3D;&quot;date&quot;
        label&#x3D;&quot;日期&quot;
        width&#x3D;&quot;180&quot;&gt;
      &lt;&#x2F;el-table-column&gt;
      &lt;el-table-column
        prop&#x3D;&quot;name&quot;
        label&#x3D;&quot;姓名&quot;
        width&#x3D;&quot;180&quot;&gt;
      &lt;&#x2F;el-table-column&gt;
      &lt;el-table-column
        prop&#x3D;&quot;address&quot;
        label&#x3D;&quot;地址&quot;&gt;
      &lt;&#x2F;el-table-column&gt;
      &lt;el-table-column
        prop&#x3D;&quot;test&quot;
        label&#x3D;&quot;测试列&quot;&gt;
      &lt;&#x2F;el-table-column&gt;
    &lt;&#x2F;el-table&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
  export default &#123;
    data() &#123;
      return &#123;
        tableData: [&#123;
          date: &#39;2016-05-02&#39;,
          name: &#39;王小虎&#39;,
          address: &#39;上海市普陀区金沙江路 1518 弄&#39;,
          test: &#39;测试&#39;
        &#125;, &#123;
          date: &#39;2016-05-04&#39;,
          name: &#39;王小虎&#39;,
          address: &#39;上海市普陀区金沙江路 1517 弄&#39;
        &#125;, &#123;
          date: &#39;2016-05-01&#39;,
          name: &#39;王小虎&#39;,
          address: &#39;上海市普陀区金沙江路 1519 弄&#39;
        &#125;, &#123;
          date: &#39;2016-05-03&#39;,
          name: &#39;王小虎&#39;,
          address: &#39;上海市普陀区金沙江路 1516 弄&#39;
        &#125;]
      &#125;
    &#125;
  &#125;
&lt;&#x2F;script&gt;
&lt;style&gt;

&lt;&#x2F;style&gt;</code></pre></div>

<p>测试：</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image17.png" srcset="/img/loading.gif" alt></p>
<p>通过查看代码发现，<code>el-table</code> 组件绑定了<code>tableData</code>模型数据，<code>tableData</code>模型数据在<code>script</code>标签中定义。</p>
<h3 id="3、页面内容完善"><a href="#3、页面内容完善" class="headerlink" title="3、页面内容完善"></a>3、页面内容完善</h3><p>根据需求完善页面内容，完善列表字段，添加分页组件。</p>
<div class="hljs"><pre><code class="hljs vue">&lt;template&gt;
  &lt;div&gt;
    &lt;el-button type&#x3D;&quot;primary&quot; v-on:click&#x3D;&quot;query&quot; size&#x3D;&quot;small&quot;&gt;查询&lt;&#x2F;el-button&gt;
    &lt;el-table
    :data&#x3D;&quot;list&quot;
    border
    style&#x3D;&quot;width: 100%&quot;&gt;
    &lt;el-table-column prop&#x3D;&quot;pageName&quot; label&#x3D;&quot;页面名称&quot; width&#x3D;&quot;120&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;el-table-column prop&#x3D;&quot;pageAliase&quot; label&#x3D;&quot;别名&quot; width&#x3D;&quot;120&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;el-table-column prop&#x3D;&quot;pageType&quot; label&#x3D;&quot;页面类型&quot; width&#x3D;&quot;150&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;el-table-column prop&#x3D;&quot;pageWebPath&quot; label&#x3D;&quot;访问路径&quot; width&#x3D;&quot;250&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;el-table-column prop&#x3D;&quot;pagePhysicalPath&quot; label&#x3D;&quot;物理路径&quot; width&#x3D;&quot;250&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;el-table-column prop&#x3D;&quot;pageCreateTime&quot; label&#x3D;&quot;创建时间&quot;&gt;
    &lt;&#x2F;el-table-column&gt;
    &lt;&#x2F;el-table&gt;
    &lt;el-pagination
    layout&#x3D;&quot;prev, pager, next&quot;
    :page-size&#x3D;&quot;this.params.size&quot;
    v-on:current-change&#x3D;&quot;changePage&quot;
    :total&#x3D;&quot;total&quot; :current-page&#x3D;&quot;this.params.page&quot; style&#x3D;&quot;float:right;&quot;&gt;
    &lt;&#x2F;el-pagination&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
  export default &#123;
    data() &#123;
      return &#123;
        list:[],
        total:50,
        params:&#123;
          page:1,&#x2F;&#x2F;页码
          size:2&#x2F;&#x2F;每页显示个数
        &#125;
      &#125;
    &#125;,
    methods:&#123;
      changePage:function () &#123;
        this.query()
      &#125;,
    &#x2F;&#x2F;查询
      query:function () &#123;
        alert(&quot;查询&quot;)
      &#125;
    &#125;
  &#125;
&lt;&#x2F;script&gt;</code></pre></div>

<p>测试</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image18.png" srcset="/img/loading.gif" alt></p>
<h2 id="2-API调用"><a href="#2-API调用" class="headerlink" title="2. API调用"></a>2. API调用</h2><h3 id="1、定义"><a href="#1、定义" class="headerlink" title="1、定义"></a>1、定义</h3><p>在cms模块的 <code>api</code> 目录定义<code>cms.js</code>，<br>在 <code>cms.js</code> 中定义如下js方法，此方法实现 <code>http</code> 请求服务端页面查询接口。</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//public是对axios的工具类封装，定义了http请求方法</span>
<span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'./../../../base/api/public'</span>

<span class="hljs-comment">//页面查询</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> page_list = <span class="hljs-function">(<span class="hljs-params">page,size,params</span>) =&gt;</span> &#123;
    <span class="hljs-comment">//定义方法，请求服务端查询接口</span>
    <span class="hljs-keyword">return</span> http.requestQuickGet(<span class="hljs-string">'http://localhost:31001/cms/page/list/'</span>+page+<span class="hljs-string">'/'</span>+size)
&#125;</code></pre></div>

<p><code>axios</code>实现了<code>http</code>方法的封装，<code>vue.js</code> 官方不再继续维护 <code>vue-resource</code>,推荐使用 <code>axios</code>。</p>
<h3 id="2、调用"><a href="#2、调用" class="headerlink" title="2、调用"></a>2、调用</h3><p>前端 <code>page_list.vue</code> 页面导入cms.js，调用js方法请求服务端页面查询接口。</p>
<p>请求的参数根据后端的 <code>Swagger</code> 文档进行配置 <a href="http://localhost:31001/swagger-ui.html" target="_blank" rel="noopener">http://localhost:31001/swagger-ui.html</a></p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image19.png" srcset="/img/loading.gif" alt></p>
<p>配置</p>
<div class="hljs"><pre><code class="hljs js">&lt;script&gt;
  <span class="hljs-comment">//导入api</span>
  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> cmsApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/cms'</span>;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;
    data() &#123;
      <span class="hljs-keyword">return</span> &#123;
        list:[],
        total:<span class="hljs-number">50</span>,
        params:&#123;
          page:<span class="hljs-number">1</span>,<span class="hljs-comment">//页码</span>
          size:<span class="hljs-number">2</span><span class="hljs-comment">//每页显示个数</span>
        &#125;
      &#125;
    &#125;,
    methods:&#123;
      changePage:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-keyword">this</span>.query()
      &#125;,
    <span class="hljs-comment">//查询</span>
      query:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-comment">//调用服务端接口</span>
        cmsApi.page_list(<span class="hljs-keyword">this</span>.params.page, <span class="hljs-keyword">this</span>.params.size).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>&#123;
          <span class="hljs-comment">//将res结果数据赋值给数据模型对象</span>
          <span class="hljs-keyword">this</span>.list = res.queryResult.list
          <span class="hljs-keyword">this</span>.total = res.queryResult.total
        &#125;)
      &#125;
    &#125;
  &#125;
&lt;<span class="hljs-regexp">/script&gt;</span></code></pre></div>

<h2 id="3-跨域问题解决"><a href="#3-跨域问题解决" class="headerlink" title="3. 跨域问题解决"></a>3. 跨域问题解决</h2><p>测试 上边的代理 ，结果 报错如下 ：</p>
<div class="hljs"><pre><code class="hljs html">No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin
'http://localhost:11000' is therefore not allowed access.</code></pre></div>

<p>原因：浏览器的同源策略不允许跨域访问，所谓同源策略是指协议、域名、端口相同。</p>
<p>解决：采用 <code>proxyTable</code> 解决。</p>
<h3 id="proxyTable-是什么？"><a href="#proxyTable-是什么？" class="headerlink" title="proxyTable 是什么？"></a>proxyTable 是什么？</h3><p>vue-cli提供的解决vue开发环境下跨域问题的方法，proxyTable的底层使用了 <code>http-proxymiddleware</code>（<a href="https://github.com/chimurai/http-proxy-middleware%EF%BC%89%EF%BC%8C%E5%AE%83%E6%98%AFhttp%E4%BB%A3%E7%90%86%E4%B8%AD%E9%97%B4%E4%BB%B6%EF%BC%8C%E5%AE%83%E4%BE%9D%E8%B5%96" target="_blank" rel="noopener">https://github.com/chimurai/http-proxy-middleware），它是http代理中间件，它依赖</a> <code>node.js</code>，<br>基本原理是用服务端代理解决浏览器跨域：</p>
<h3 id="cms跨域解决原理："><a href="#cms跨域解决原理：" class="headerlink" title="cms跨域解决原理："></a>cms跨域解决原理：</h3><p>1、访问页面<a href="http://localhost:11000/" target="_blank" rel="noopener">http://localhost:11000/</a></p>
<p>2、页面请求<a href="http://localhost:11000/cms" target="_blank" rel="noopener">http://localhost:11000/cms</a></p>
<blockquote>
<p>由于url由<a href="http://localhost/" target="_blank" rel="noopener">http://localhost</a>:31001/cms…改为“<a href="http://localhost:11000/cms.&quot;，所以不存在跨域" target="_blank" rel="noopener">http://localhost:11000/cms.&quot;，所以不存在跨域</a></p>
</blockquote>
<p>3、通过proxyTable由node服务器代理请求 <a href="http://localhost:31001/cms" target="_blank" rel="noopener">http://localhost:31001/cms</a>.</p>
<blockquote>
<p>服务端不存在跨域问题</p>
</blockquote>
<p>具体的配置如下：</p>
<p>1、修改<code>api</code>方法中<code>url</code>的定义</p>
<p>请求前加/api前缀</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//public是对axios的工具类封装，定义了http请求方法</span>
<span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'./../../../base/api/public'</span>  <span class="hljs-comment">//ES6 导入</span>
<span class="hljs-keyword">let</span> sysConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@/../config/sysConfig'</span>)
<span class="hljs-keyword">let</span> apiUrl = sysConfig.xcApiUrlPre
<span class="hljs-comment">//页面查询</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> page_list = <span class="hljs-function">(<span class="hljs-params">page,size,params</span>) =&gt;</span> &#123;
  <span class="hljs-comment">//定义方法，请求服务端查询接口</span>
  <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl + <span class="hljs-string">'/cms/page/list/'</span>+page+<span class="hljs-string">'/'</span>+size)
&#125;</code></pre></div>

<p>2、在 <code>config/index.js</code> 下配置 <code>proxyTable</code></p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-string">'/api/cms'</span>: &#123;
    target: <span class="hljs-string">'http://localhost:31001'</span>,
    pathRewrite: &#123;
    <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span><span class="hljs-comment">//实际请求去掉/api</span>
&#125;</code></pre></div>

<h2 id="4-分页查询测试"><a href="#4-分页查询测试" class="headerlink" title="4. 分页查询测试"></a>4. 分页查询测试</h2><p>1、定义分页视图</p>
<div class="hljs"><pre><code class="hljs vue"> &lt;el-pagination
      @size-change&#x3D;&quot;handleSizeChange&quot;
      @current-change&#x3D;&quot;handleCurrentChange&quot;
      :page-sizes&#x3D;&quot;[5,10, 20, 30, 100]&quot;
      :current-page&#x3D;&quot;this.params.page&quot;
      :page-size&#x3D;&quot;this.params.size&quot;
      :total&#x3D;&quot;this.total&quot;
      layout&#x3D;&quot;total, sizes, prev, pager, next, jumper&quot;
      v-on:current-change&#x3D;&quot;changePage&quot;
      style&#x3D;&quot;float:right;&quot;&gt;
&lt;&#x2F;el-pagination&gt;</code></pre></div>

<p>2、定义数据模型对象</p>
<div class="hljs"><pre><code class="hljs js">data() &#123;
     <span class="hljs-keyword">return</span> &#123;
       list:[],
       total:<span class="hljs-number">0</span>,  <span class="hljs-comment">//数据总量</span>
       params:&#123;
         page:<span class="hljs-number">1</span>,<span class="hljs-comment">//默认页码</span>
         size:<span class="hljs-number">10</span><span class="hljs-comment">//默认每页显示个数</span>
       &#125;
     &#125;
&#125;,</code></pre></div>

<p>3、定义分页方法，接收页码参数</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//触发分页参数变动</span>
handleSizeChange(val) &#123;
  <span class="hljs-keyword">this</span>.params.size = val
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`每页 <span class="hljs-subst">$&#123;val&#125;</span> 条`</span>);
&#125;,
handleCurrentChange(val) &#123;
  <span class="hljs-keyword">this</span>.params.page = val
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`当前页: <span class="hljs-subst">$&#123;val&#125;</span>`</span>);
&#125;,

<span class="hljs-comment">//分页查询，接收page页码</span>
changePage()&#123;
  <span class="hljs-keyword">this</span>.query()
&#125;,

<span class="hljs-comment">//查询</span>
query:<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-comment">//调用服务端接口</span>
  cmsApi.page_list(<span class="hljs-keyword">this</span>.params.page, <span class="hljs-keyword">this</span>.params.size).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span>&#123;
    <span class="hljs-comment">//将res结果数据赋值给数据模型对象</span>
    <span class="hljs-keyword">this</span>.list = res.queryResult.list
    <span class="hljs-keyword">this</span>.total = res.queryResult.total
  &#125;)
&#125;</code></pre></div>

<p>修改完毕，分页测试效果如下</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image20.png" srcset="/img/loading.gif" alt></p>
<h2 id="5-进入页面立即查询"><a href="#5-进入页面立即查询" class="headerlink" title="5.进入页面立即查询"></a>5.进入页面立即查询</h2><p>目前实现的功能是进入页面点击查询按钮向服务端表求查询，实际的需求是进入页面立即查询。</p>
<p><strong>那么如何实现？</strong></p>
<p>这要用到 <code>vue</code> 的钩子函数，每个 <code>Vue</code> 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 <code>DOM</code> 并在数据变化时更新 <code>DOM</code> 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会 。</p>
<p>通常使用最多的是 <code>created</code> 和 <code>mounted</code> 两个钩子：</p>
<p><code>created</code>：vue实例已创建但是DOM元素还没有渲染生成。</p>
<p><code>mounted</code>：DOM元素渲染生成完成后调用 。</p>
<p>本例子在两个方法的任意一个都满足需求：</p>
<p>添加如下代码：</p>
<div class="hljs"><pre><code class="hljs js">mounted() &#123;
    <span class="hljs-comment">//默认查询页面</span>
    <span class="hljs-keyword">this</span>.query()
&#125;</code></pre></div>

<p>重新刷新页面。</p>
<h1 id="六、前端请求响应流程小结"><a href="#六、前端请求响应流程小结" class="headerlink" title="六、前端请求响应流程小结"></a>六、前端请求响应流程小结</h1><p>参考 “讲义–&gt;前后端请求响应流程.png”，如下：</p>
<p><img src="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday02/image21.png" srcset="/img/loading.gif" alt></p>
<p>根据图中所示，我们总结流程如下：</p>
<p>1、在浏览器输入前端url</p>
<p>2、前端框架 <code>vue.js</code> 根据 <code>url</code> 解析路由，根据路由找到 <code>page_list.vue</code> 页面</p>
<p>3、首先执行 <code>page_list.vue</code> 中的钩子方法</p>
<p>4、在钩子方法中调用 <code>query</code> 方法。</p>
<p>5、在 <code>query</code> 方法中调用 <code>cms.js</code> 中的 <code>page_list</code> 方法</p>
<p>6、<code>cms.js</code> 中的 <code>page_list</code> 方法通过 <code>axios</code> 请求服务端接口</p>
<p>7、采用 <code>proxyTable</code> 解决跨域问题，<code>node.js</code> 将请求转发到服务端(<a href="http://localhost:31001/cms/page/list" target="_blank" rel="noopener">http://localhost:31001/cms/page/list</a>)</p>
<p>8、服务端处理，将查询结果响应给前端</p>
<p>9、成功响应调用 <code>then</code> 方法，在 <code>then</code> 方法中处理响应结果，将查询结果赋值给数据模型中的total和list变量。</p>
<p>10、<code>vue.js</code> 通过双向数据绑定将list数据渲染输出 。</p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF/">学成在线</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/webpack/">webpack</a>
                    
                      <a class="hover-with-bg" href="/tags/Vue/">Vue</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/08/09/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday03/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">学成在线day03：CMS页面管理开发</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/08/08/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday01/">
                        <span class="hidden-mobile">学成在线day01：搭建环境、CMS服务端开发</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>
<!--

代码块js 用不到，fulid自带有，添加css样式即可实现
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 

<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>

-->




<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键字</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
	<div>
  <span id="timeDate">载入天数...</span>
  <span id="times">载入时分秒...</span>
  <script>
  var now = new Date();
  function createtime(){
      var grt= new Date("06/20/2020 00:00:00");//此处修改你的建站时间或者网站上线时间
      now.setTime(now.getTime()+250);
      days = (now - grt ) / 1000 / 60 / 60 / 24;
      dnum = Math.floor(days);
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
      hnum = Math.floor(hours);
      if(String(hnum).length ==1 ){
          hnum = "0" + hnum;
      }
      minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes);
      if(String(mnum).length ==1 ){
                mnum = "0" + mnum;
      }
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds);
      if(String(snum).length ==1 ){
                snum = "0" + snum;
      }
      document.getElementById("timeDate").innerHTML = "本站已经勉强运行&nbsp"+dnum+"&nbsp天";
      document.getElementById("times").innerHTML = hnum + "&nbsp小时&nbsp" + mnum + "&nbsp分&nbsp" + snum + "&nbsp秒";
  }
  setInterval("createtime()",250);
  </script>
</div>
    
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


    
  <!-- 备案信息 -->
  <div class="beian">
    <a href="http://beian.miit.gov.cn/" target="_blank"
       rel="nofollow noopener">京ICP证20000725号</a>
    
      <a
        href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=20000725"
        rel="nofollow noopener"
        class="beian-police"
        target="_blank"
      >
        <span class="beian-police-sep">&nbsp;|&nbsp;</span>
        
          <img src="/img/police_beian.png" srcset="/img/loading.gif" alt="police-icon" />
        
        <span>京公网安备20000725号</span>
      </a>
     
  </div>


    
	
  </div>
  

</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



  
<script src="/js/custom.js"></script>




  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "学成在线day02：CMS前端开发&nbsp;",
      ],
      cursorChar: "|",
      typeSpeed: 65,
      loop: true,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "<"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  
















<script type="text/javascript"
color="107,160,220" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
