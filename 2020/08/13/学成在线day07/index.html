<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Mr.JK">
  <meta name="keywords" content="">
  <title>学成在线day07 - Mr.JK</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/darcula.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/custom.css">



  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>





<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>私人博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                主页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于我
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/banner.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-08-13 21:05">
      2020-08-13
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      7k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      111
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
	
   
	
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
            <article class="markdown-body">
              <h1 id="😎知识点概览"><a href="#😎知识点概览" class="headerlink" title="😎知识点概览"></a>😎知识点概览</h1><blockquote>
<p>为了方便后续回顾该项目时能够清晰的知道本章节讲了哪些内容，并且能够从该章节的笔记中得到一些帮助，所以在完成本章节的学习后在此对本章节所涉及到的知识点进行总结概述。</p>
</blockquote>
<p>本章节为【学成在线】项目的 <code>day07</code> 的内容</p>
<ul>
<li>对课程管理的CRUD</li>
<li>级联菜单</li>
<li>使用 <code>mongoDB</code> 储存数据字典</li>
</ul>
<h1 id="一、课程查询"><a href="#一、课程查询" class="headerlink" title="一、课程查询"></a>一、课程查询</h1><h2 id="1-需求分析"><a href="#1-需求分析" class="headerlink" title="1. 需求分析"></a>1. 需求分析</h2><p>课程添加完成后可通过我的课程进入课程修改页面，此页面显示我的课程列表，如下图所示，可分页查询。</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image1.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image1.png" srcset="/img/loading.gif" alt="image-20200403212250200"></a></p>
<p>上边的查询要实现分页、会存在多表关联查询，所以建议使用mybatis实现我的课程查询。</p>
<h2 id="2-定义API接口"><a href="#2-定义API接口" class="headerlink" title="2. 定义API接口"></a>2. 定义API接口</h2><p><strong>输入参数</strong>：页码、每页显示个数、查询条件</p>
<p><strong>输出结果类型</strong>：QueryResponseResult&lt;自定义类型&gt;，在 <code>api</code> 工程创建 <code>course</code> 包，创建<code>CourseControllerApi</code> 接口。</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Api</span>(value=<span class="hljs-string">"课程管理API"</span>,description = <span class="hljs-string">"用于对课程的增删查改"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CourseControllerApi</span> </span>&#123;
	<span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">"分页查询课程列表"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> QueryResponseResult <span class="hljs-title">findCourseList</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size, CourseListRequest courseListRequest)</span></span>;
&#125;</code></pre></div>

<h2 id="3-课程管理服务"><a href="#3-课程管理服务" class="headerlink" title="3. 课程管理服务"></a>3. 课程管理服务</h2><h3 id="PageHelper"><a href="#PageHelper" class="headerlink" title="PageHelper"></a>PageHelper</h3><p><code>PageHelper</code> 是 <code>mybatis</code> 的通用分页插件，通过 <code>mybatis</code> 的拦截器实现分页功能，拦截sql查询请求，添加分页语句，最终实现分页查询功能。</p>
<p>我的课程具有分页功能，本项目使用 <code>Pagehelper</code> 实现 <code>Mybatis</code> 分页功能开发，由于本项目使用 <code>springboot</code> 开发，在 <code>springboot</code> 上集成 <code>pagehelper</code>（<a href="https://github.com/pagehelper/pagehelper-spring-boot%EF%BC%89" target="_blank" rel="noopener">https://github.com/pagehelper/pagehelper-spring-boot）</a><code>PageHelper</code> 的使用方法及原理如下：</p>
<ul>
<li>在调用 <code>dao</code> 的 <code>service</code> 方法中设置分页参数：<strong>PageHelper.startPage(page, size)</strong>，分页参数会设置在 <code>ThreadLocal</code> 中</li>
<li><code>PageHelper</code> 在 <code>mybatis</code> 执行 <code>sql</code> 前进行拦截，从 <code>ThreadLocal</code> 取出分页参数，修改当前执行的 <code>sql</code> 语句，添加分页 <code>sql</code>。</li>
<li>最后执行添加了分页<code>sql</code>的 <code>sql</code>语句，实现分页查询。</li>
</ul>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image2.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image2.png" srcset="/img/loading.gif" alt="image-20200403213815138"></a></p>
<p>1）添加依赖</p>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper‐spring‐boot‐starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre></div>

<p>2）配置pageHelper</p>
<div class="hljs"><pre><code class="hljs yaml"><span class="hljs-attr">pagehelper:</span>
  <span class="hljs-string">helper‐dialect:</span> <span class="hljs-string">mysql</span></code></pre></div>

<h3 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h3><p>1）mapper 接口</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.github.pagehelper.Page;
<span class="hljs-keyword">import</span> com.xuecheng.framework.domain.course.CourseBase;
<span class="hljs-keyword">import</span> com.xuecheng.framework.domain.course.ext.CourseInfo;
<span class="hljs-keyword">import</span> com.xuecheng.framework.domain.course.request.CourseListRequest;
<span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Mapper;
<span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CourseMapper</span> </span>&#123;
    <span class="hljs-function">CourseBase <span class="hljs-title">findCourseBaseById</span><span class="hljs-params">(String id)</span></span>;
    <span class="hljs-function">Page&lt;CourseInfo&gt; <span class="hljs-title">findCourseListPage</span><span class="hljs-params">(CourseListRequest courseListRequest)</span></span>;
&#125;</code></pre></div>

<p>2）mapper.xml映射文件</p>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findCourseListPage"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.xuecheng.framework.domain.course.ext.CourseInfo"</span></span>
<span class="hljs-tag">        <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.xuecheng.framework.domain.course.request.CourseListRequest"</span>&gt;</span>
    SELECT
    course_base.*,
    (SELECT pic FROM course_pic WHERE courseid = course_base.id) pic
    FROM
    course_base
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></code></pre></div>

<ol>
<li>测试dao</li>
</ol>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">//测试分页</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testPageHelper</span><span class="hljs-params">()</span></span>&#123;
    PageHelper.startPage(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>);
    CourseListRequest courseListRequest = <span class="hljs-keyword">new</span> CourseListRequest();
    Page&lt;CourseInfo&gt; courseListPage = courseMapper.findCourseListPage(courseListRequest);
    List&lt;CourseInfo&gt; result = courseListPage.getResult();
    System.out.println(courseListPage);
&#125;</code></pre></div>

<p>测试前修改日志级别为debug，并跟踪运行日志，发现sql语句中已经包括分页语句。</p>
<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>定义CourseService.java类，用于课程管理的service定义：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment">     * 分页查询课程信息</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> size</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> courseListRequest</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span>
<span class="hljs-comment">     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> QueryResponseResult <span class="hljs-title">findCourseList</span><span class="hljs-params">(<span class="hljs-keyword">int</span> page, <span class="hljs-keyword">int</span> size, CourseListRequest courseListRequest)</span></span>&#123;
        <span class="hljs-keyword">if</span> (page &lt;= <span class="hljs-number">0</span>)&#123;
            page = <span class="hljs-number">1</span>;
        &#125;
        <span class="hljs-keyword">if</span> (size &lt;= <span class="hljs-number">0</span>)&#123;
            size = <span class="hljs-number">4</span>;
        &#125;
        <span class="hljs-keyword">if</span>(courseListRequest == <span class="hljs-keyword">null</span>)&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
        &#125;
        <span class="hljs-keyword">if</span> (courseListRequest.getCompanyId() == <span class="hljs-keyword">null</span>)&#123;
            <span class="hljs-comment">//没输入公司id默认为1</span>
            courseListRequest.setCompanyId(<span class="hljs-string">"1"</span>);
        &#125;

        PageHelper.startPage(<span class="hljs-number">1</span>,<span class="hljs-number">7</span>);
        Page&lt;CourseInfo&gt; courseInfos = courseMapper.findCoursePageList(courseListRequest);

        <span class="hljs-keyword">long</span> total = courseInfos.getTotal();
        List&lt;CourseInfo&gt; result = courseInfos.getResult();

        QueryResult queryResult = <span class="hljs-keyword">new</span> QueryResult();
        queryResult.setTotal(total);
        queryResult.setList(result);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> QueryResponseResult(CommonCode.SUCCESS,queryResult);
    &#125;</code></pre></div>

<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/course"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CourseController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CourseControllerApi</span> </span>&#123;
    <span class="hljs-meta">@Autowired</span>
    CourseService courseService;
    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/coursebase/list/&#123;page&#125;/&#123;size&#125;"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> QueryResponseResult&lt;CourseInfo&gt; <span class="hljs-title">findCourseList</span><span class="hljs-params">(</span></span>
<span class="hljs-function"><span class="hljs-params">            @PathVariable(<span class="hljs-string">"page"</span>)</span> <span class="hljs-keyword">int</span> page,</span>
<span class="hljs-function">            @<span class="hljs-title">PathVariable</span><span class="hljs-params">(<span class="hljs-string">"size"</span>)</span> <span class="hljs-keyword">int</span> size,</span>
<span class="hljs-function">            CourseListRequest courseListRequest) </span>&#123;
        <span class="hljs-keyword">return</span> courseService.findCourseList(page,size,courseListRequest);
    &#125;
&#125;</code></pre></div>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>使用 <code>postman</code> 或 <code>swagger-ui</code> 测试课程列表接口。</p>
<h2 id="4-前端开发"><a href="#4-前端开发" class="headerlink" title="4. 前端开发"></a>4. 前端开发</h2><h3 id="页面编写"><a href="#页面编写" class="headerlink" title="页面编写"></a>页面编写</h3><p>创建 ourse_list.vue</p>
<p>1）使用element 的card组件</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image3.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image3.png" srcset="/img/loading.gif" alt="image-20200403214719252"></a></p>
<p>页面布局代码如下：</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el‐row</span> &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"8"</span>  <span class="hljs-attr">:offset</span>=<span class="hljs-string">2</span> &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐card</span> <span class="hljs-attr">:body</span>‐<span class="hljs-attr">style</span>=<span class="hljs-string">"&#123; padding: '10px' &#125;"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static/images/add.jpg"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"150px"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 10px;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>课程名称<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom clearfix"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">time</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"time"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">time</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/add/base'&#125;"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">el‐button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> &gt;</span>新增课程<span class="hljs-tag">&lt;/<span class="hljs-name">el‐button</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el‐card</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"8"</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">for</span>=<span class="hljs-string">"(course, index) in courses"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"course.id"</span> <span class="hljs-attr">:offset</span>=<span class="hljs-string">"index &gt; 0 ?</span></span>
<span class="hljs-tag"><span class="hljs-string">2 : 2"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐card</span> <span class="hljs-attr">:body</span>‐<span class="hljs-attr">style</span>=<span class="hljs-string">"&#123; padding: '10px' &#125;"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"course.pic!=null?imgUrl+course.pic:'/static/images/nonepic.jpg'"</span></span>
<span class="hljs-tag"><span class="hljs-attr">class</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"150px"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 10px;"</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;course.name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bottom clearfix"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">time</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"time"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">time</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el‐button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleManage(course.id)"</span>&gt;</span>管理课程
<span class="hljs-tag">&lt;/<span class="hljs-name">el‐button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el‐card</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐col</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">!‐‐分页‐‐</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">"24"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toolbar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐pagination</span> <span class="hljs-attr">background</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"prev, pager, next"</span> @<span class="hljs-attr">current</span>‐</span>
<span class="hljs-tag"><span class="hljs-attr">change</span>=<span class="hljs-string">"handleCurrentChange"</span> <span class="hljs-attr">:page</span>‐<span class="hljs-attr">size</span>=<span class="hljs-string">"size"</span></span>
<span class="hljs-tag">                       <span class="hljs-attr">:total</span>=<span class="hljs-string">"total"</span> <span class="hljs-attr">:current</span>‐<span class="hljs-attr">page</span>=<span class="hljs-string">"page"</span></span>
<span class="hljs-tag">                       <span class="hljs-attr">style</span>=<span class="hljs-string">"float:right;"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el‐pagination</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐col</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el‐row</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> courseApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/course'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> utilApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../common/utils'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">let</span> sysConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@/../config/sysConfig'</span>)</span>
<span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
    data() &#123;
<span class="actionscript">      <span class="hljs-keyword">return</span> &#123;</span>
        page:1,
        size:7,
        total: 0,
        courses: [],
<span class="actionscript">        sels: [],<span class="hljs-comment">//列表选中列</span></span>
        imgUrl:sysConfig.imgUrl
      &#125;
    &#125;,
    methods: &#123;
<span class="actionscript">        <span class="hljs-comment">//分页方法</span></span>
      handleCurrentChange(val) &#123;
<span class="actionscript">        <span class="hljs-keyword">this</span>.page = val;</span>
      &#125;,
<span class="actionscript">      <span class="hljs-comment">//获取课程列表</span></span>
      getCourse() &#123;
      
      &#125;,
<span class="actionscript">      handleManage: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(id)</span> </span>&#123;</span>
<span class="javascript">        <span class="hljs-built_in">console</span>.log(id)</span>
<span class="actionscript">        <span class="hljs-keyword">this</span>.$router.push(&#123; path: <span class="hljs-string">'/course/manager/'</span>+id&#125;)</span>
      &#125;
    &#125;,
    created()&#123;
     &#125;,
    mounted() &#123;
    &#125;
  &#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>
<span class="css">  <span class="hljs-selector-class">.el</span>‐<span class="hljs-selector-tag">col</span>‐8&#123;</span>
<span class="css">    <span class="hljs-selector-tag">width</span><span class="hljs-selector-pseudo">:20</span>%</span>
  &#125;
<span class="css">  <span class="hljs-selector-class">.el</span>‐<span class="hljs-selector-tag">col</span>‐<span class="hljs-selector-tag">offset</span>‐2&#123;</span>
<span class="css">    <span class="hljs-selector-tag">margin</span>‐<span class="hljs-selector-tag">left</span><span class="hljs-selector-pseudo">:2</span>%</span>
  &#125;
<span class="css">  <span class="hljs-selector-class">.time</span> &#123;</span>
    font‐size: 13px;
<span class="css">    <span class="hljs-selector-tag">color</span>: <span class="hljs-selector-id">#999</span>;</span>
  &#125;
<span class="css">  <span class="hljs-selector-class">.bottom</span> &#123;</span>
    margin‐top: 13px;
    line‐height: 12px;
  &#125;
<span class="css">  <span class="hljs-selector-class">.button</span> &#123;</span>
    padding: 0;
    float: right;
  &#125;
<span class="css">  <span class="hljs-selector-class">.image</span> &#123;</span>
    width: 100%;
    display: block;
  &#125;
<span class="css">  <span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:before</span>,</span>
<span class="css">  <span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> &#123;</span>
    display: table;
    content: "";
  &#125;
<span class="css">  <span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> &#123;</span>
    clear: both
  &#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div>

<p>2）路由</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">import</span> course_list <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_list.vue'</span>;
<span class="hljs-keyword">import</span> Home <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/home/page/home.vue'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
  &#123;
     path: <span class="hljs-string">'/course'</span>,
    component: Home,
    name: <span class="hljs-string">'课程管理'</span>,
    hidden: <span class="hljs-literal">false</span>,
    iconCls: <span class="hljs-string">'el‐icon‐document'</span>,
    children: [
      &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/list'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'我的课程'</span>,<span class="hljs-attr">component</span>: course_list,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> &#125;
    ]
  &#125;
]</code></pre></div>

<h3 id="Api调用"><a href="#Api调用" class="headerlink" title="Api调用"></a>Api调用</h3><p>1、定义Api方法</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//我的课程列表</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> findCourseList = <span class="hljs-function">(<span class="hljs-params">page,size,params</span>) =&gt;</span> &#123;
     <span class="hljs-comment">//对于查询条件，向服务端传入key/value串。</span>
     <span class="hljs-comment">//使用工具类将json对象转成key/value</span>
     <span class="hljs-keyword">let</span> queries = querystring.stringify(params)
    <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl+<span class="hljs-string">"/course/coursebase/list/"</span>+page+<span class="hljs-string">"/"</span>+size+<span class="hljs-string">"?"</span>+queries);
&#125;</code></pre></div>

<p>2、在页面调用 <code>findCourseList</code> 方法</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//获取课程列表</span>
getCourse() &#123;
  courseApi.findCourseList(<span class="hljs-keyword">this</span>.page,<span class="hljs-keyword">this</span>.size,&#123;&#125;).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
          <span class="hljs-built_in">console</span>.log(res);
          <span class="hljs-keyword">if</span>(res.success)&#123;
            <span class="hljs-keyword">this</span>.total = res.queryResult.total;
            <span class="hljs-keyword">this</span>.courses = res.queryResult.list;
          &#125;
  &#125;);
&#125;</code></pre></div>

<p>在 <code>mounted</code> 钩子中调用 <code>getCourse</code> 方法</p>
<div class="hljs"><pre><code class="hljs js">mounted() &#123;
  <span class="hljs-comment">//查询我的课程</span>
  <span class="hljs-keyword">this</span>.getCourse();
&#125;</code></pre></div>

<p>在分页方法中调用 <code>getCourse</code> 方法</p>
<div class="hljs"><pre><code class="hljs js"> <span class="hljs-comment">//分页方法</span>
handleCurrentChange(val) &#123;
  <span class="hljs-keyword">this</span>.page = val;
  <span class="hljs-keyword">this</span>.getCourse();
&#125;,</code></pre></div>

<h3 id="1测试"><a href="#1测试" class="headerlink" title="1测试"></a>1测试</h3><p>页面效果如下：</p>
<p>注意：由于课程图片服务器没有搭建，这里图片暂时无法显示。</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image4.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image4.png" srcset="/img/loading.gif" alt="image-20200403215009200"></a></p>
<h1 id="二、新增课程"><a href="#二、新增课程" class="headerlink" title="二、新增课程"></a>二、新增课程</h1><h2 id="1-需求分析-1"><a href="#1-需求分析-1" class="headerlink" title="1. 需求分析"></a>1. 需求分析</h2><p>用户操作流程如下：</p>
<p>1、用户进入“我的课程”页面，点击“新增课程”，进入新增课程页面</p>
<p><a href="https://qnoss.codeyee.com/20200706_Ng==/image4.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image5.png" srcset="/img/loading.gif" alt="image-20200403215030231"></a></p>
<p>2、填写课程信息，选择课程分类、课程等级、学习模式等。</p>
<p>3、信息填写完毕，点击“提交”，课程添加成功或课程添加失败并提示失败原因。</p>
<p>需要解决的是在新增页面上输入的信息：</p>
<p>1、课程分类 多级分类，需要方便用户去选择。</p>
<p>2、课程等级、学习模式等这些选项建议是可以配置的。</p>
<h2 id="2-课程分类查询"><a href="#2-课程分类查询" class="headerlink" title="2. 课程分类查询"></a>2. 课程分类查询</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>在新增课程界面需要选择课程所属分类， 分类信息是整个项目非常重要的信息，课程即商品，分类信息设置的好坏直接影响用户访问量。</p>
<p>分类信息在哪里应用？</p>
<p>1、首页分类导航</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image5.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/imagei5.png" srcset="/img/loading.gif" alt="image-20200403215130650"></a></p>
<p>2 、课程的归属地</p>
<p>添加课程时要选择课程的所属分类。</p>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><p>分类表 <code>category</code> 的结构如下</p>
<p><a href="https://qnoss.codeyee.com/20200706_Ng==/image11.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image11.png" srcset="/img/loading.gif" alt="image-20200403215159778"></a></p>
<h3 id="分类查询"><a href="#分类查询" class="headerlink" title="分类查询"></a>分类查询</h3><h4 id="1）数据格式"><a href="#1）数据格式" class="headerlink" title="1）数据格式"></a>1）数据格式</h4><p>在添加课程时需要选择课程所属的分类，这里需要定义课程分类查询接口。</p>
<p>接口格式要根据前端需要的数据格式来定义，前端展示课程分类使用 <code>elemenet-ui</code> 的<code>cascader</code>（级联选择器）组件。</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image6.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image6.png" srcset="/img/loading.gif" alt="image-20200403215240113"></a></p>
<p>数据格式例子如下：</p>
<div class="hljs"><pre><code class="hljs js">[
  &#123;
        value: <span class="hljs-string">'zhinan'</span>,
        label: <span class="hljs-string">'指南'</span>,
        children: [&#123;
          value: <span class="hljs-string">'shejiyuanze'</span>,
          label: <span class="hljs-string">'设计原则'</span>,
          children: [&#123;
            value: <span class="hljs-string">'yizhi'</span>,
            label: <span class="hljs-string">'一致'</span>
          &#125;, &#123;
            value: <span class="hljs-string">'fankui'</span>,
            label: <span class="hljs-string">'反馈'</span>
          &#125;, &#123;
            value: <span class="hljs-string">'xiaolv'</span>,
            label: <span class="hljs-string">'效率'</span>
          &#125;, &#123;
            value: <span class="hljs-string">'kekong'</span>,
            label: <span class="hljs-string">'可控'</span>
          &#125;]
        &#125;]
  &#125;
]</code></pre></div>

<h4 id="2）数据模型"><a href="#2）数据模型" class="headerlink" title="2）数据模型"></a>2）数据模型</h4><p>1）定义category的模型</p>
<p>category 模型对数据字段对应，如下：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ToString</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table</span>(name=<span class="hljs-string">"category"</span>)
<span class="hljs-meta">@GenericGenerator</span>(name = <span class="hljs-string">"jpa‐assigned"</span>, strategy = <span class="hljs-string">"assigned"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Category</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = ‐<span class="hljs-number">906357110051689484L</span>;
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue</span>(generator = <span class="hljs-string">"jpa‐assigned"</span>)
    <span class="hljs-meta">@Column</span>(length = <span class="hljs-number">32</span>)
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String label;
    <span class="hljs-keyword">private</span> String parentid;
    <span class="hljs-keyword">private</span> String isshow;
    <span class="hljs-keyword">private</span> Integer orderby;
    <span class="hljs-keyword">private</span> String isleaf;
&#125;</code></pre></div>

<p>2）定义数据返回格式</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ToString</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CategoryNode</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Category</span> </span>&#123;
    List&lt;CategoryNode&gt; children;
&#125;</code></pre></div>

<p>级联菜单属于三级菜单，所以每个菜单下面都会有一个 <code>chaidren</code> 的字段</p>
<h4 id="3）API-接口"><a href="#3）API-接口" class="headerlink" title="3）API 接口"></a>3）API 接口</h4><div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.xuecheng.api.web.controller.api.course;
<span class="hljs-keyword">import</span> com.xuecheng.framework.domain.course.ext.CategoryNode;
<span class="hljs-keyword">import</span> io.swagger.annotations.Api;
<span class="hljs-keyword">import</span> io.swagger.annotations.ApiOperation;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;
<span class="hljs-meta">@Api</span>(value = <span class="hljs-string">"课程分类管理"</span>,description = <span class="hljs-string">"课程分类管理"</span>,tags = &#123;<span class="hljs-string">"课程分类管理"</span>&#125;)

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CategoryControllerApi</span> </span>&#123;
    <span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">"查询分类"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> CategoryNode <span class="hljs-title">findList</span><span class="hljs-params">()</span></span>;
&#125;</code></pre></div>

<h4 id="4）DAO"><a href="#4）DAO" class="headerlink" title="4）DAO"></a>4）DAO</h4><p>1）定义mapper</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CategoryMapper</span> </span>&#123;
    <span class="hljs-comment">//查询分类</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> CategoryNode <span class="hljs-title">selectList</span><span class="hljs-params">()</span></span>;
&#125;</code></pre></div>

<p>2）定义mapper映射文件</p>
<p>采用表的自连接方式输出树型结果集。</p>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span> <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> &gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.xuecheng.manage_course.dao.CategoryMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"CategoryMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"com.xuecheng.framework.domain.course.ext.CategoryNode"</span>&gt;</span>
        <span class="hljs-comment">&lt;!--一级节点--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_id"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_name"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"label"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_label"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isshow"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_isshow"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orderby"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_orderby"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isleaf"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_isleaf"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"parentid"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"one_parentid"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"children"</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">"com.xuecheng.framework.domain.course.ext.CategoryNode"</span>&gt;</span>
            <span class="hljs-comment">&lt;!--二级节点--&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_id"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_name"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"label"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_label"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isshow"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_isshow"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orderby"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_orderby"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isleaf"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_isleaf"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"parentid"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"two_parentid"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"children"</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">"com.xuecheng.framework.domain.course.ext.CategoryNode"</span>&gt;</span>
                <span class="hljs-comment">&lt;!--三级节点--&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_id"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_name"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"label"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_label"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isshow"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_isshow"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orderby"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_orderby"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"isleaf"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_isleaf"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"parentid"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"three_parentid"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

    <span class="hljs-comment">&lt;!--三级菜单查询--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectList"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"CategoryMap"</span>&gt;</span>
        select
        a.id one_id,
        a.name one_name,
        a.label one_label,
        a.isshow one_isshow,
        a.isleaf one_isleaf,
        a.orderby one_orderby,
        a.parentid one_parentid,
        b.id two_id,
        b.name two_name,
        b.label two_label,
        b.isshow two_isshow,
        b.isleaf two_isleaf,
        b.orderby two_orderby,
        b.parentid two_parentid,
        c.id three_id,
        c.name three_name,
        c.label three_label,
        c.isshow three_isshow,
        c.isleaf three_isleaf,
        c.orderby three_orderby,
        c.parentid three_parentid
        from
        category a left join category b
        on a.id = b.parentid
        left join category c
        on b.id = c.parentid
        where a.parentid = '0'

        order by a.orderby,
        b.orderby,
        c.orderby
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></code></pre></div>

<h4 id="5）Service"><a href="#5）Service" class="headerlink" title="5）Service"></a>5）Service</h4><div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Mr.JK</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2020-08-13  14:14</span>
<span class="hljs-comment"> */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CategoryService</span> </span>&#123;

    <span class="hljs-meta">@Autowired</span>
    CategoryMapper categoryMapper;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> CategoryNode <span class="hljs-title">findCategoryList</span><span class="hljs-params">()</span></span>&#123;
        <span class="hljs-keyword">return</span> categoryMapper.selectList();
    &#125;
&#125;</code></pre></div>

<h4 id="6）Controller"><a href="#6）Controller" class="headerlink" title="6）Controller"></a>6）Controller</h4><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/category"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CategoryController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CategoryControllerApi</span> </span>&#123;

    <span class="hljs-meta">@Autowired</span>
    CategoryService categoryService;


    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/list"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> CategoryNode <span class="hljs-title">findList</span><span class="hljs-params">()</span> </span>&#123;
        <span class="hljs-keyword">return</span> categoryService.findCategoryList();
    &#125;
&#125;</code></pre></div>

<h4 id="7）接口测试"><a href="#7）接口测试" class="headerlink" title="7）接口测试"></a>7）接口测试</h4><p>接口描述如下</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image7.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image7.png" srcset="/img/loading.gif" alt="image-20200403215645362"></a></p>
<p>使用swagger-ui或postman测试接口。</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image8.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image8.png" srcset="/img/loading.gif" alt="image-20200403215654115"></a></p>
<h2 id="3-数据字典"><a href="#3-数据字典" class="headerlink" title="3. 数据字典"></a>3. 数据字典</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><p>在新增课程界面需要选择课程等级、课程状态等，这些信息统一采用数据字典管理的方式。<br>本项目对一些业务的分类配置信息，比如：课程等级、课程状态、用户类型、用户状态等进行统一管理，通过在数据库创建数据字典表来维护这些分类信息。</p>
<p>数据字典对系统的业务分类进行统一管理，并且也可以解决硬编码问题，比如添加课程时选择课程等级，下拉框中的课程等级信息如果在页面硬编码将造成不易修改维护的问题，所以从数据字典表中获取，如果要修改名称则在数据字典修改即可，提高系统的可维护性。</p>
<h3 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h3><p>在 <code>mongodb</code> 中创建数据字典表 <code>sys_dictionary</code></p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image9.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image9.png" srcset="/img/loading.gif" alt="image-20200403220146001"></a></p>
<p>一个字典信息如下</p>
<div class="hljs"><pre><code class="hljs json"> &#123;
<span class="hljs-attr">"_id"</span> : ObjectId(<span class="hljs-string">"5a7e8d2dd019f15418fa2b71"</span>),
<span class="hljs-attr">"d_name"</span> : <span class="hljs-string">"课程等级"</span>,
<span class="hljs-attr">"d_type"</span> : <span class="hljs-string">"200"</span>,
<span class="hljs-attr">"d_value"</span> : [
    &#123;
        <span class="hljs-attr">"sd_name"</span> : <span class="hljs-string">"低级"</span>,
        <span class="hljs-attr">"sd_id"</span> : <span class="hljs-string">"200001"</span>,
        <span class="hljs-attr">"sd_status"</span> : <span class="hljs-string">"1"</span>
    &#125;,
    &#123;
        <span class="hljs-attr">"sd_name"</span> : <span class="hljs-string">"中级"</span>,
        <span class="hljs-attr">"sd_id"</span> : <span class="hljs-string">"200002"</span>,
        <span class="hljs-attr">"sd_status"</span> : <span class="hljs-string">"1"</span>
    &#125;,
    &#123;
        <span class="hljs-attr">"sd_name"</span> : <span class="hljs-string">"高级"</span>,
        <span class="hljs-attr">"sd_id"</span> : <span class="hljs-string">"200003"</span>,
        <span class="hljs-attr">"sd_status"</span> : <span class="hljs-string">"1"</span>
    &#125;
]
&#125;</code></pre></div>

<p>字段说明如下：</p>
<p><code>d_name</code>：字典名称</p>
<p><code>d_type</code>：字典分类</p>
<p><code>d_value</code>：字典数据</p>
<p>sd_name：项目名称</p>
<p><code>sd_id</code>：项目id</p>
<p><code>sd_status</code>：项目状态（1：可用，0不可用）</p>
<p><strong>数据模型类</strong>：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ToString</span>
<span class="hljs-meta">@Document</span>(collection = <span class="hljs-string">"sys_dictionary"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysDictionary</span> </span>&#123;
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"d_name"</span>)
    <span class="hljs-keyword">private</span> String dName;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"d_type"</span>)
    <span class="hljs-keyword">private</span> String dType;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"d_value"</span>)
    <span class="hljs-keyword">private</span> List&lt;SysDictionaryValue&gt; dValue;
&#125;</code></pre></div>

<p><code>SysDictionaryValue</code> 类型：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@ToString</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysDictionaryValue</span> </span>&#123;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"sd_id"</span>)
    <span class="hljs-keyword">private</span> String sdId;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"sd_name"</span>)
    <span class="hljs-keyword">private</span> String sdName;
    <span class="hljs-meta">@Field</span>(<span class="hljs-string">"sd_status"</span>)
    <span class="hljs-keyword">private</span> String sdStatus;
&#125;</code></pre></div>

<h3 id="字典查询接口"><a href="#字典查询接口" class="headerlink" title="字典查询接口"></a>字典查询接口</h3><h4 id="API接口"><a href="#API接口" class="headerlink" title="API接口"></a>API接口</h4><p>为了方便其它子系统使用，在cms模块下创建字典查询接口，根据字典的type查询字典信息，接口定义如下：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Mr.JK</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2020-08-13  14:24</span>
<span class="hljs-comment"> */</span>
<span class="hljs-meta">@Api</span>(value = <span class="hljs-string">"数据字典接口"</span>,description = <span class="hljs-string">"提供数据字典接口的管理，查询功能"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">SysDicthionaryControllerApi</span> </span>&#123;

    <span class="hljs-comment">//数据字典</span>
    <span class="hljs-meta">@ApiOperation</span>(value = <span class="hljs-string">"数据字典查询接口"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> SysDictionary <span class="hljs-title">getByType</span><span class="hljs-params">(String type)</span></span>;
&#125;</code></pre></div>

<h4 id="Dao-1"><a href="#Dao-1" class="headerlink" title="Dao"></a>Dao</h4><p>在cms模块下创建数据库的dao、service等类。</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Mr.JK</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@create</span> 2020-08-13  14:30</span>
<span class="hljs-comment"> */</span>
<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">SysDicthionaryRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MongoRepository</span>&lt;<span class="hljs-title">SysDictionary</span>,<span class="hljs-title">String</span>&gt; </span>&#123;

    <span class="hljs-function"><span class="hljs-keyword">public</span> SysDictionary <span class="hljs-title">findAllByDType</span><span class="hljs-params">(String type)</span></span>;
&#125;</code></pre></div>

<h4 id="Service-1"><a href="#Service-1" class="headerlink" title="Service"></a>Service</h4><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysDicthinaryService</span> </span>&#123;

    <span class="hljs-meta">@Autowired</span>
    SysDicthionaryRepository sysDicthionaryRepository;

    <span class="hljs-function"><span class="hljs-keyword">public</span> SysDictionary <span class="hljs-title">getByType</span><span class="hljs-params">(String type)</span> </span>&#123;
        <span class="hljs-keyword">if</span> (type == <span class="hljs-keyword">null</span>)&#123;
            ExceptionCast.cast(CommonCode.INVALID_PARAM);
        &#125;
        <span class="hljs-keyword">return</span> sysDicthionaryRepository.findAllByDType(type);
    &#125;
&#125;</code></pre></div>

<h4 id="Controller-1"><a href="#Controller-1" class="headerlink" title="Controller"></a>Controller</h4><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/sys"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysDicthionaryController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SysDicthionaryControllerApi</span> </span>&#123;

    <span class="hljs-meta">@Autowired</span>
    SysDicthinaryService sysDicthinaryService;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/dictionary/get/&#123;dType&#125;"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> SysDictionary <span class="hljs-title">getByType</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"dType"</span>)</span> String type) </span>&#123;
        <span class="hljs-keyword">return</span> sysDicthinaryService.getByType(type);
    &#125;
&#125;</code></pre></div>

<h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4><p><a href="https://qnoss.codeyee.com/20200706_Nw==/image10.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image10.png" srcset="/img/loading.gif" alt="image-20200403220513616"></a></p>
<h2 id="4-新增课程页面完善"><a href="#4-新增课程页面完善" class="headerlink" title="4. 新增课程页面完善"></a>4. 新增课程页面完善</h2><p>本节完成数据字典显示及课程分类显示。</p>
<h3 id="新增课程页面"><a href="#新增课程页面" class="headerlink" title="新增课程页面"></a>新增课程页面</h3><h4 id="1）页面效果如下："><a href="#1）页面效果如下：" class="headerlink" title="1）页面效果如下："></a>1）页面效果如下：</h4><p><a href="https://qnoss.codeyee.com/20200706_Nw==/image11.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/imagei11.png" srcset="/img/loading.gif" alt="image-20200403220536863"></a></p>
<h4 id="2）创建-course-add-vue-页面"><a href="#2）创建-course-add-vue-页面" class="headerlink" title="2）创建 course_add.vue 页面"></a>2）创建 course_add.vue 页面</h4><p>在<code>teach</code> 前端工程的 <code>course</code> 模块下创建 <code>course_add.vue</code> 页面。</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el‐form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"courseForm"</span> <span class="hljs-attr">label</span>‐<span class="hljs-attr">width</span>=<span class="hljs-string">"80px"</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">"courseRules"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"courseForm"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程名称"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.name"</span> <span class="hljs-attr">auto</span>‐<span class="hljs-attr">complete</span>=<span class="hljs-string">"off"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"适用人群"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"users"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.users"</span> <span class="hljs-attr">auto</span>‐<span class="hljs-attr">complete</span>=<span class="hljs-string">"off"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程分类"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"categoryActive"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐cascader</span></span>
<span class="hljs-tag">          <span class="hljs-attr">expand</span>‐<span class="hljs-attr">trigger</span>=<span class="hljs-string">"hover"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">:options</span>=<span class="hljs-string">"categoryList"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"categoryActive"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">:props</span>=<span class="hljs-string">"props"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el‐cascader</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程等级"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"grade"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">for</span>=<span class="hljs-string">"grade in gradeList"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el‐radio</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.grade"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"grade.sdId"</span> &gt;</span>&#123;&#123;grade.sdName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el‐</span></span>
<span class="hljs-tag"><span class="hljs-attr">radio</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"学习模式"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"studymodel"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">for</span>=<span class="hljs-string">"studymodel_v in studymodelList"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el‐radio</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.studymodel"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"studymodel_v.sdId"</span> &gt;</span>
&#123;&#123;studymodel_v.sdName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el‐radio</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程介绍"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"description"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.description"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"footer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog‐footer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>  @<span class="hljs-attr">click.native</span>=<span class="hljs-string">"save"</span> &gt;</span>提交<span class="hljs-tag">&lt;/<span class="hljs-name">el‐button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> courseApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/course'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> utilApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../common/utils'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> systemApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../base/api/system'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
    data() &#123;
<span class="actionscript">      <span class="hljs-keyword">return</span> &#123;</span>
             studymodelList:[],
        gradeList:[],
        props: &#123;
<span class="actionscript">          value: <span class="hljs-string">'id'</span>,</span>
<span class="actionscript">          label:<span class="hljs-string">'label'</span>,</span>
<span class="actionscript">          children:<span class="hljs-string">'children'</span></span>
        &#125;,
        categoryList: [],
        categoryActive:[],
        courseForm: &#123;
<span class="actionscript">          id:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          name: <span class="hljs-string">''</span>,</span>
<span class="actionscript">          users: <span class="hljs-string">''</span>,</span>
<span class="actionscript">          grade:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          studymodel:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          mt:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          st:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          description: <span class="hljs-string">''</span></span>
        &#125;,
        courseRules: &#123;
          name: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请输入课程名称'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          category: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择课程分类'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          grade: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择课程等级'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          studymodel: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择学习模式'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ]
        &#125;
      &#125;
    &#125;,
    methods: &#123;
      save () &#123;
      &#125;
    &#125;,
    created()&#123;
    &#125;,
    mounted()&#123;
    &#125;
  &#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div>

<h4 id="3）页面路由"><a href="#3）页面路由" class="headerlink" title="3）页面路由"></a>3）页面路由</h4><div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">import</span> course_add <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_add.vue'</span>; 
    &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/add/base'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'添加课程'</span>,<span class="hljs-attr">component</span>: course_add,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> &#125;,</code></pre></div>

<h4 id="4）课程添加链接"><a href="#4）课程添加链接" class="headerlink" title="4）课程添加链接"></a>4）课程添加链接</h4><p>在我的课程页面添加“新增课程”链接<br>在 <code>course_list.vue</code> 中添加</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/add/base'&#125;"</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">el‐button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"button"</span> &gt;</span>新增课程<span class="hljs-tag">&lt;/<span class="hljs-name">el‐button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span></code></pre></div>

<h3 id="查询数据字典"><a href="#查询数据字典" class="headerlink" title="查询数据字典"></a>查询数据字典</h3><p>课程添加页面中课程等级、学习模式需要从数据字典查询字典信息。</p>
<p>1）<strong>定义方法</strong></p>
<p>数据字典查询 为公用方法，所以定义在 <code>/base/api/system.js</code> 中</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">let</span> sysConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@/../config/sysConfig'</span>) 
<span class="hljs-keyword">let</span> apiUrl = sysConfig.xcApiUrlPre;
<span class="hljs-comment">/*数据字典 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> sys_getDictionary= <span class="hljs-function"><span class="hljs-params">dType</span> =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl+<span class="hljs-string">'/sys/dictionary/get/'</span>+dType)
&#125;</code></pre></div>

<p>2）<strong>在页面获取数据字典</strong></p>
<p>在 <code>mounted</code> 钩子中定义方法如下：</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">// 查询数据字典字典</span>
systemApi.sys_getDictionary(<span class="hljs-string">'201'</span>).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
<span class="hljs-keyword">this</span>.studymodelList = res.dvalue;
&#125;);
systemApi.sys_getDictionary(<span class="hljs-string">'200'</span>).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
<span class="hljs-keyword">this</span>.gradeList = res.dvalue;
&#125;);</code></pre></div>

<p>3）<strong>效果</strong></p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image12.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/C:%5CUsers%5CMI%5CDesktop%5CHexo%5Csource_posts%5C%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07%5Cimage12.png" srcset="/img/loading.gif" alt="image-20200403221002719"></a></p>
<h3 id="课程分类"><a href="#课程分类" class="headerlink" title="课程分类"></a>课程分类</h3><p>课程添加页面中课程分类采用 <code>Cascader</code> 组件完成。</p>
<p><code>Cascader</code> 级联选择器</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image13.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image13.png" srcset="/img/loading.gif" alt="image-20200403221022081"></a></p>
<p><strong>1）页面</strong></p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">" 课程分类"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"categoryActive"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">el‐cascader</span></span>
<span class="hljs-tag">    <span class="hljs-attr">expand</span>‐<span class="hljs-attr">trigger</span>=<span class="hljs-string">"hover"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">:options</span>=<span class="hljs-string">"categoryList"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"categoryActive"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">:props</span>=<span class="hljs-string">"props"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el‐cascader</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span></code></pre></div>

<p><strong>2）定义方法</strong><br>在本模块的<code>course.js</code>中定义</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">/* 查询课程分类 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> category_findlist= <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl+<span class="hljs-string">'/category/list'</span>)
&#125;</code></pre></div>

<p><strong>3）在页面获取课程分类</strong></p>
<p>在 <code>mounted</code> 钩子中定义</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">// 取课程分类</span>
courseApi.category_findlist(&#123;&#125;).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">this</span>.categoryList = res.children;
&#125;);</code></pre></div>

<p><strong>4）效果</strong></p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image14.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image14.png" srcset="/img/loading.gif" alt="image-20200403221132985"></a></p>
<p><strong>5) 如何获取选择的分类</strong></p>
<p>用户选择课程分类后，所选分类 <code>ID</code> 绑定到 <code>categoryActive</code>（数组）中，选择了一级、二级分类，分别存储在 <code>categoryActive</code> 数组的第一个、第二个元素中。</p>
<h2 id="5-新增课程服务端"><a href="#5-新增课程服务端" class="headerlink" title="5. 新增课程服务端"></a>5. 新增课程服务端</h2><h3 id="API接口-1"><a href="#API接口-1" class="headerlink" title="API接口"></a>API接口</h3><p>创建课程添加提交接口：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Api</span>(value = <span class="hljs-string">" 课程管理"</span>,description = <span class="hljs-string">"课程管理"</span>,tags = &#123;<span class="hljs-string">"课程管理"</span>&#125;)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CourseControllerApi</span> </span>&#123;
  
    <span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">"添加课程基础信息"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> AddCourseResult <span class="hljs-title">addCourseBase</span><span class="hljs-params">(CourseBase courseBase)</span></span>;
&#125;</code></pre></div>

<h3 id="Dao-2"><a href="#Dao-2" class="headerlink" title="Dao"></a>Dao</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CourseBaseRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JpaRepository</span>&lt;<span class="hljs-title">CourseBase</span>,<span class="hljs-title">String</span>&gt; </span>&#123;
&#125;</code></pre></div>

<h3 id="Service-2"><a href="#Service-2" class="headerlink" title="Service"></a>Service</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment">     * 添加课程基本信息</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> courseBase</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span>
<span class="hljs-comment">     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> AddCourseResult <span class="hljs-title">addCourseBase</span><span class="hljs-params">(CourseBase courseBase)</span> </span>&#123;
        String courseBaseId = courseBase.getId();
        courseBaseRepository.save(courseBase);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> AddCourseResult(CommonCode.SUCCESS,courseBaseId);
    &#125;</code></pre></div>

<h3 id="Controller-2"><a href="#Controller-2" class="headerlink" title="Controller"></a>Controller</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
   <span class="hljs-meta">@PostMapping</span>(<span class="hljs-string">"coursebase/add"</span>)
   <span class="hljs-function"><span class="hljs-keyword">public</span> AddCourseResult <span class="hljs-title">addCourseBase</span><span class="hljs-params">(@RequestBody CourseBase courseBase)</span> </span>&#123;
       <span class="hljs-keyword">return</span> courseService.addCourseBase(courseBase);
   &#125;</code></pre></div>

<h2 id="6-新增课程前端"><a href="#6-新增课程前端" class="headerlink" title="6. 新增课程前端"></a>6. 新增课程前端</h2><h3 id="Api方法定义"><a href="#Api方法定义" class="headerlink" title="Api方法定义"></a>Api方法定义</h3><p>在前端定义请求服务端添加课程的api的方法，在course模块中定义方法如下：</p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">/* 添加课程基础信息*/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addCourseBase = <span class="hljs-function"><span class="hljs-params">params</span> =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestPost(apiUrl+<span class="hljs-string">'/course/coursebase/add'</span>,params)
&#125;</code></pre></div>

<h3 id="Api方法调用"><a href="#Api方法调用" class="headerlink" title="Api方法调用"></a>Api方法调用</h3><p>在<code>course_add.vue</code> 调用<code>api</code>提交课程信息</p>
<div class="hljs"><pre><code class="hljs js">methods: &#123; 
      save () &#123;
          <span class="hljs-keyword">this</span>.$refs.courseForm.validate(<span class="hljs-function">(<span class="hljs-params">valid</span>) =&gt;</span> &#123;
            <span class="hljs-keyword">if</span> (valid) &#123;
              <span class="hljs-keyword">this</span>.$confirm(<span class="hljs-string">'确认提交吗？'</span>, <span class="hljs-string">'提示'</span>, &#123;&#125;).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;
                <span class="hljs-comment">//当前选择的分类</span>
                <span class="hljs-keyword">let</span> mt = <span class="hljs-keyword">this</span>.categoryActive[<span class="hljs-number">0</span>];
                <span class="hljs-keyword">let</span> st = <span class="hljs-keyword">this</span>.categoryActive[<span class="hljs-number">1</span>];
                <span class="hljs-keyword">this</span>.courseForm.mt = mt;
                <span class="hljs-keyword">this</span>.courseForm.st = st;
                <span class="hljs-comment">//请求服务接口</span>
                courseApi.addCourseBase(<span class="hljs-keyword">this</span>.courseForm).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
                  <span class="hljs-keyword">if</span>(res.success)&#123;
                    <span class="hljs-keyword">this</span>.$message.success(<span class="hljs-string">'提交成功'</span>);
                    <span class="hljs-comment">//跳转到课程图片</span>
                    <span class="hljs-comment">//this.$router.push(&#123; path: '/course/add/picture/1/'+this.courseid&#125;)</span>
                  &#125;<span class="hljs-keyword">else</span>&#123;
                    <span class="hljs-keyword">if</span>(res.message)&#123;
                      <span class="hljs-keyword">this</span>.$message.error(res.message);
                    &#125;<span class="hljs-keyword">else</span>&#123;
                      <span class="hljs-keyword">this</span>.$message.error(<span class="hljs-string">'提交失败'</span>);
                    &#125;
                   &#125;
                &#125;);
              &#125;);
            &#125;
          &#125;);
      &#125;
    &#125;,</code></pre></div>

<h3 id="测试-2"><a href="#测试-2" class="headerlink" title="测试"></a>测试</h3><p>注意：将 <code>course_base</code> 表中的 <code>company_id</code> 改为非必填，待认证功能开发完成再修改为必填</p>
<p>测试流程：</p>
<p>1、进入我的课程，点击“新增课程”打开新增课程页面</p>
<p>2、输入课程信息，点击提交</p>
<h1 id="三、课程信息修改"><a href="#三、课程信息修改" class="headerlink" title="三、课程信息修改"></a>三、课程信息修改</h1><h2 id="1-需求分析-2"><a href="#1-需求分析-2" class="headerlink" title="1. 需求分析"></a>1. 需求分析</h2><p>课程添加成功进入课程管理页面，通过课程管理页面修改课程的基本信息、编辑课程图片、编辑课程营销信息等。</p>
<p>本小节实现修改课程。</p>
<h2 id="2-课程管理页面说明"><a href="#2-课程管理页面说明" class="headerlink" title="2. 课程管理页面说明"></a>2. 课程管理页面说明</h2><h3 id="页面结构"><a href="#页面结构" class="headerlink" title="页面结构"></a>页面结构</h3><p>课程管理页面的结构如下：</p>
<p><a href="https://qnoss.codeyee.com/20200706_Nw==/image15.png" target="_blank" rel="noopener"><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/image15.png" srcset="/img/loading.gif" alt="image-20200403221706645"></a></p>
<h3 id="课程管理导航页面"><a href="#课程管理导航页面" class="headerlink" title="课程管理导航页面"></a>课程管理导航页面</h3><p>1、定义<code>course_manage.vue</code>为课程管理导航页面。</p>
<p>导航效果使用 <code>Element-UI</code> 的 <code>NavMenu</code> 组件实现。</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span> 
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu</span></span>
<span class="hljs-tag">      <span class="hljs-attr">:default</span>‐<span class="hljs-attr">active</span>=<span class="hljs-string">"activeIndex"</span></span>
<span class="hljs-tag">      <span class="hljs-attr">class</span>=<span class="hljs-string">"el‐menu‐demo"</span></span>
<span class="hljs-tag">      <span class="hljs-attr">mode</span>=<span class="hljs-string">"horizontal"</span></span>
<span class="hljs-tag">      <span class="hljs-attr">background</span>‐<span class="hljs-attr">color</span>=<span class="hljs-string">"#eee"</span></span>
<span class="hljs-tag">      <span class="hljs-attr">text</span>‐<span class="hljs-attr">color</span>=<span class="hljs-string">"#000"</span></span>
<span class="hljs-tag">      <span class="hljs-attr">active</span>‐<span class="hljs-attr">text</span>‐<span class="hljs-attr">color</span>=<span class="hljs-string">"#000"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/summary/'+this.courseid&#125;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"1"</span>&gt;</span>课程首页<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/baseinfo/'+this.courseid&#125;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"2"</span>&gt;</span>基本信息<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/picture/'+this.courseid&#125;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"3"</span>&gt;</span>课程图片<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/marketinfo/'+this.courseid&#125;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"4"</span>&gt;</span>课程营销<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/plan/'+this.courseid&#125;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"5"</span>&gt;</span>课程计划<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/teacher/'+this.courseid&#125;"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"6"</span>&gt;</span>教师信息<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router‐link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mui‐tab‐item"</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">"&#123;path:'/course/manage/pub/'+this.courseid&#125;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">el‐menu‐item</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"7"</span>&gt;</span> 发布课程<span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">router‐link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el‐menu</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">router‐view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router‐view</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> courseApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/course'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> utilApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../common/utils'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
    data() &#123;
<span class="actionscript">      <span class="hljs-keyword">return</span> &#123;</span>
<span class="actionscript">        activeIndex:<span class="hljs-string">'2'</span>,</span>
<span class="actionscript">        courseid:<span class="hljs-string">''</span></span>
      &#125;
    &#125;,
    methods: &#123;
    &#125;,
    mounted()&#123;
<span class="actionscript">      <span class="hljs-comment">//课程id</span></span>
<span class="actionscript">      <span class="hljs-keyword">this</span>.courseid = <span class="hljs-keyword">this</span>.$route.params.courseid</span>
<span class="javascript">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"courseid="</span> + <span class="hljs-keyword">this</span>.courseid)</span>
<span class="actionscript">      <span class="hljs-comment">//跳转到页面列表</span></span>
<span class="actionscript">      <span class="hljs-keyword">this</span>.$router.push(&#123; path: <span class="hljs-string">'/course/manage/baseinfo/'</span>+<span class="hljs-keyword">this</span>.courseid&#125;)</span>
    &#125;
  &#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>
 
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div>

<p>2、<strong>创建各各信息管理页面</strong></p>
<p>通过管理页面的导航可以进入各各信息管理页面，这里先创建各各信息管理页面，页面内容暂</p>
<p>时为空，待开发时再完善，在本模块的 <code>page</code> 目录下创建 <code>course_manage</code> 目录，此目录存放</p>
<p>各个信息管理页面，页面明细如下：</p>
<p>课程管理首页：<strong>course_summary.vue</strong></p>
<p>基本信息修改页面：<strong>course_baseinfo.vue</strong></p>
<p>图片管理页面：<strong>course_picture.vue</strong></p>
<p>营销信息页面：<strong>course_marketinfo.vue</strong></p>
<p>老师信息页面：<strong>course_teacher.vue</strong></p>
<p>课程计划页面：<strong>course_plan.vue</strong></p>
<p>课程发布页面：<strong>course_pub.vue</strong></p>
<p>3 、<strong>创建路由</strong></p>
<div class="hljs"><pre><code class="hljs js"><span class="hljs-keyword">import</span> course_manage <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage.vue'</span>; 
<span class="hljs-keyword">import</span> course_summary <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_summary.vue'</span>;
<span class="hljs-keyword">import</span> course_picture <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_picture.vue'</span>;
<span class="hljs-keyword">import</span> course_baseinfo <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_baseinfo.vue'</span>;
<span class="hljs-keyword">import</span> course_marketinfo <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_marketinfo.vue'</span>;
<span class="hljs-keyword">import</span> course_teacher <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_teacher.vue'</span>;
<span class="hljs-keyword">import</span> course_plan <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_plan.vue'</span>;
<span class="hljs-keyword">import</span> course_pub <span class="hljs-keyword">from</span> <span class="hljs-string">'@/module/course/page/course_manage/course_pub.vue'</span>;
&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manager/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'管理课程'</span>,<span class="hljs-attr">component</span>: course_manage,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span> ,
        children: [
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/plan/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'课程计划'</span>,<span class="hljs-attr">component</span>: course_plan,<span class="hljs-attr">hidden</span>:
<span class="hljs-literal">false</span> &#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/baseinfo/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'基本信息'</span>,<span class="hljs-attr">component</span>:
course_baseinfo,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> &#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/picture/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'课程图片'</span>,<span class="hljs-attr">component</span>:
course_picture,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> &#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/marketinfo/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'营销信息'</span>,<span class="hljs-attr">component</span>:
course_marketinfo,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> &#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/teacher/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'教师信息'</span>,<span class="hljs-attr">component</span>:
course_teacher,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span>&#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/pub/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'发布课程'</span>,<span class="hljs-attr">component</span>: course_pub,<span class="hljs-attr">hidden</span>:
<span class="hljs-literal">false</span>&#125;,
          &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/manage/summary/:courseid'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'课程首页'</span>,<span class="hljs-attr">component</span>:
course_summary,<span class="hljs-attr">hidden</span>: <span class="hljs-literal">false</span> &#125;
        ]&#125;</code></pre></div>

<h2 id="3-Api-接口"><a href="#3-Api-接口" class="headerlink" title="3. Api 接口"></a>3. Api 接口</h2><p>修改课程需要如下接口：</p>
<p>1、根据id查询课程信息</p>
<p>2、修改课程提交</p>
<p>接口定义如下：</p>
<ol>
<li>根据课程ID查询课程信息</li>
</ol>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">" 获取课程基础信息"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> CourseBase <span class="hljs-title">getCourseBaseById</span><span class="hljs-params">(String courseId)</span> <span class="hljs-keyword">throws</span> RuntimeException</span>;</code></pre></div>

<p>2）修改课程信息</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@ApiOperation</span>(<span class="hljs-string">"更新课程基础信息"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title">updateCourseBase</span><span class="hljs-params">(String id,CourseBase courseBase)</span></span>;</code></pre></div>

<h2 id="4-服务端"><a href="#4-服务端" class="headerlink" title="4. 服务端"></a>4. 服务端</h2><h3 id="Dao-3"><a href="#Dao-3" class="headerlink" title="Dao"></a>Dao</h3><p>略</p>
<h3 id="Service-3"><a href="#Service-3" class="headerlink" title="Service"></a>Service</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment">     * 根据课程id查询课程基本信息</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> courseId</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span>
<span class="hljs-comment">     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> CourseBase <span class="hljs-title">getCourseBaseById</span><span class="hljs-params">(String courseId)</span> </span>&#123;
        <span class="hljs-keyword">if</span> (courseId == <span class="hljs-keyword">null</span>)&#123;
            ExceptionCast.cast(CommonCode.INVALID_PARAM);
        &#125;
        Optional&lt;CourseBase&gt; optional = courseBaseRepository.findById(courseId);
        <span class="hljs-keyword">if</span> (optional.isPresent())&#123;
            CourseBase courseBase = optional.get();
            <span class="hljs-keyword">return</span> courseBase;
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;

    &#125;

    <span class="hljs-comment">/**</span>
<span class="hljs-comment">     * 更新课程基本信息</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@param</span> courseBase</span>
<span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span>
<span class="hljs-comment">     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title">updateCourseBase</span><span class="hljs-params">(String id, CourseBase courseBase)</span> </span>&#123;
        CourseBase courseBaseNew = <span class="hljs-keyword">this</span>.getCourseBaseById(id);

        BeanUtils.copyProperties(courseBase,courseBaseNew);
        courseBaseRepository.save(courseBaseNew);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ResponseResult(CommonCode.SUCCESS);
    &#125;</code></pre></div>

<h3 id="Controller-3"><a href="#Controller-3" class="headerlink" title="Controller"></a>Controller</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"coursebase/get/&#123;id&#125;"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> CourseBase <span class="hljs-title">getCourseBaseById</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> String courseId) <span class="hljs-keyword">throws</span> RuntimeException </span>&#123;
        <span class="hljs-keyword">return</span> courseService.getCourseBaseById(courseId);
    &#125;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@PutMapping</span>(<span class="hljs-string">"coursebase/update/&#123;id&#125;"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title">updateCourseBase</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> String id,@RequestBody CourseBase courseBase) </span>&#123;
        <span class="hljs-keyword">return</span> courseService.updateCourseBase(id,courseBase);
    &#125;</code></pre></div>

<h2 id="5-前端"><a href="#5-前端" class="headerlink" title="5. 前端"></a>5. 前端</h2><h3 id="修改页面"><a href="#修改页面" class="headerlink" title="修改页面"></a>修改页面</h3><p>在 <code>course</code> 模块下的 <code>course_manage</code> 目录下创建 <code>course_baseinfo.vue</code> 页面，本页面实现课程修改</p>
<div class="hljs"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span> 
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el‐form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"courseForm"</span> <span class="hljs-attr">label</span>‐<span class="hljs-attr">width</span>=<span class="hljs-string">"80px"</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">"courseRules"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"courseForm"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程名称"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.name"</span> <span class="hljs-attr">auto</span>‐<span class="hljs-attr">complete</span>=<span class="hljs-string">"off"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"适用人群"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"users"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.users"</span> <span class="hljs-attr">auto</span>‐<span class="hljs-attr">complete</span>=<span class="hljs-string">"off"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程分类"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"categoryActive"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐cascader</span></span>
<span class="hljs-tag">          <span class="hljs-attr">expand</span>‐<span class="hljs-attr">trigger</span>=<span class="hljs-string">"hover"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">:options</span>=<span class="hljs-string">"categoryList"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"categoryActive"</span></span>
<span class="hljs-tag">          <span class="hljs-attr">:props</span>=<span class="hljs-string">"props"</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el‐cascader</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程等级"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"grade"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">for</span>=<span class="hljs-string">"grade in gradeList"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el‐radio</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.grade"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"grade.sdId"</span> &gt;</span>&#123;&#123;grade.sdName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el‐</span></span>
<span class="hljs-tag"><span class="hljs-attr">radio</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"学习模式"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"studymodel"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">b</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">for</span>=<span class="hljs-string">"studymodel_v in studymodelList"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el‐radio</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.studymodel"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"studymodel_v.sdId"</span> &gt;</span>
&#123;&#123;studymodel_v.sdName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el‐radio</span>&gt;</span><span class="hljs-symbol">&amp;nbsp;</span><span class="hljs-symbol">&amp;nbsp;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
           <span class="hljs-tag">&lt;<span class="hljs-name">el‐form‐item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"课程介绍"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"description"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el‐input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> <span class="hljs-attr">v</span>‐<span class="hljs-attr">model</span>=<span class="hljs-string">"courseForm.description"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el‐input</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form‐item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el‐form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"footer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog‐footer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el‐button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>  @<span class="hljs-attr">click.native</span>=<span class="hljs-string">"save"</span> <span class="hljs-attr">:loading</span>=<span class="hljs-string">"editLoading"</span>&gt;</span>提交<span class="hljs-tag">&lt;/<span class="hljs-name">el‐button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> courseApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../api/course'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> utilApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../../common/utils'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> systemApi <span class="hljs-keyword">from</span> <span class="hljs-string">'../../../../base/api/system'</span>;</span>
<span class="javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span>
    data() &#123;
<span class="actionscript">      <span class="hljs-keyword">return</span> &#123;</span>
<span class="actionscript">        courseid:<span class="hljs-string">''</span>,</span>
        studymodelList:[],
        gradeList:[],
<span class="actionscript">        editLoading: <span class="hljs-literal">false</span>,</span>
        props: &#123;
<span class="actionscript">          value: <span class="hljs-string">'id'</span>,</span>
<span class="actionscript">          label:<span class="hljs-string">'label'</span>,</span>
<span class="actionscript">          children:<span class="hljs-string">'children'</span></span>
        &#125;,
        categoryList: [],
        categoryActive:[],
        courseForm: &#123;
<span class="actionscript">          id:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          name: <span class="hljs-string">''</span>,</span>
<span class="actionscript">          users: <span class="hljs-string">''</span>,</span>
<span class="actionscript">          grade:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          studymodel:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          mt:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          st:<span class="hljs-string">''</span>,</span>
<span class="actionscript">          description: <span class="hljs-string">''</span></span>
        &#125;,
        courseRules: &#123;
          name: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请输入课程名称'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          category: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择课程分类'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          grade: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择课程等级'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ],
          studymodel: [
<span class="actionscript">            &#123;required: <span class="hljs-literal">true</span>, message: <span class="hljs-string">'请选择学习模式'</span>, trigger: <span class="hljs-string">'blur'</span>&#125;</span>
          ]
         &#125;
      &#125;
    &#125;,
    methods: &#123;
      save () &#123;
         
      &#125;
    &#125;,
    created()&#123;
    &#125;,
    mounted()&#123;
    
    &#125;
  &#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre></div>

<h3 id="API方法"><a href="#API方法" class="headerlink" title="API方法"></a>API方法</h3><div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">// 获取课程基本信息</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getCoursebaseById = <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl+<span class="hljs-string">'/course/coursebase/get/'</span>+id)
&#125;
<span class="hljs-comment">//更新课程基本信息</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> updateCoursebase= <span class="hljs-function">(<span class="hljs-params">id,course</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestPut(apiUrl+<span class="hljs-string">'/course/coursebase/update/'</span>+id,course)
&#125;</code></pre></div>

<h3 id="课程信息显示"><a href="#课程信息显示" class="headerlink" title="课程信息显示"></a>课程信息显示</h3><p>在 <code>mounted</code> 钩子方法中查询课程信息及数据字典：</p>
<div class="hljs"><pre><code class="hljs js">mounted()&#123; 
      <span class="hljs-comment">//查询数据字典字典</span>
      systemApi.sys_getDictionary(<span class="hljs-string">'201'</span>).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
<span class="hljs-comment">//        console.log(res);</span>
        <span class="hljs-keyword">this</span>.studymodelList = res.dvalue;
      &#125;);
      systemApi.sys_getDictionary(<span class="hljs-string">'200'</span>).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
        <span class="hljs-keyword">this</span>.gradeList = res.dvalue;
      &#125;);
      <span class="hljs-comment">//取课程分类</span>
      courseApi.category_findlist(&#123;&#125;).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
           <span class="hljs-keyword">this</span>.categoryList = res.children; 
      &#125;);
      <span class="hljs-comment">//查询课程信息</span>
        <span class="hljs-comment">//课程id</span>
        <span class="hljs-keyword">this</span>.courseid = <span class="hljs-keyword">this</span>.$route.params.courseid;
        courseApi.getCoursebaseById(<span class="hljs-keyword">this</span>.courseid).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
          <span class="hljs-keyword">this</span>.courseForm = res;
          <span class="hljs-comment">//课程分类显示，需要两级分类</span>
          <span class="hljs-keyword">this</span>.categoryActive.push(<span class="hljs-keyword">this</span>.courseForm.mt);
          <span class="hljs-keyword">this</span>.categoryActive.push(<span class="hljs-keyword">this</span>.courseForm.st);
        &#125;);
    &#125;</code></pre></div>

<h3 id="课程修改提交"><a href="#课程修改提交" class="headerlink" title="课程修改提交"></a>课程修改提交</h3><p>编辑课程提交方法</p>
<div class="hljs"><pre><code class="hljs js">methods: &#123; 
  save () &#123;
      <span class="hljs-comment">//修改课程</span>
      <span class="hljs-keyword">this</span>.$refs.courseForm.validate(<span class="hljs-function">(<span class="hljs-params">valid</span>) =&gt;</span> &#123;
        <span class="hljs-keyword">if</span> (valid) &#123;
          <span class="hljs-keyword">this</span>.$confirm(<span class="hljs-string">'确认提交吗？'</span>, <span class="hljs-string">'提示'</span>, &#123;&#125;).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;
            <span class="hljs-keyword">let</span> mt = <span class="hljs-keyword">this</span>.categoryActive[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">let</span> st = <span class="hljs-keyword">this</span>.categoryActive[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">this</span>.courseForm.mt = mt;
            <span class="hljs-keyword">this</span>.courseForm.st = st;
            <span class="hljs-keyword">let</span> id = <span class="hljs-keyword">this</span>.courseForm.id
            courseApi.updateCoursebase(id,<span class="hljs-keyword">this</span>.courseForm).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
              <span class="hljs-keyword">if</span>(res.success)&#123;
                <span class="hljs-keyword">this</span>.$message(&#123;
                  message: <span class="hljs-string">'提交成功'</span>,
                  type: <span class="hljs-string">'success'</span>
                &#125;);
              &#125;<span class="hljs-keyword">else</span>&#123;
                <span class="hljs-keyword">if</span>(res.message)&#123;
                  <span class="hljs-keyword">this</span>.$message.error(res.message);
                &#125;<span class="hljs-keyword">else</span>&#123;
                  <span class="hljs-keyword">this</span>.$message.error(<span class="hljs-string">'提交失败'</span>);
                &#125;
              &#125;
            &#125;);
          &#125;);
        &#125;
      &#125;);
  &#125;
&#125;,</code></pre></div>

<h1 id="四、课程营销"><a href="#四、课程营销" class="headerlink" title="四、课程营销"></a>四、课程营销</h1><h2 id="1-需求分析-3"><a href="#1-需求分析-3" class="headerlink" title="1.需求分析"></a>1.需求分析</h2><p>课程添加成功进入课程管理页面，通过课程管理页面修改课程的基本信息、编辑课程图片、编辑课程营销信息等。</p>
<p>本小节实现营销信息的查询和修改。</p>
<h2 id="2-课程管理页面说明-1"><a href="#2-课程管理页面说明-1" class="headerlink" title="2.课程管理页面说明"></a>2.课程管理页面说明</h2><p><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/16.png" srcset="/img/loading.gif" alt></p>
<h3 id="页面方法"><a href="#页面方法" class="headerlink" title="页面方法"></a>页面方法</h3><div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//获取课程营销信息</span>
      courseApi.getCourseMarketById(<span class="hljs-keyword">this</span>.courseid).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
         <span class="hljs-comment">//console.log(res);</span>
        <span class="hljs-keyword">if</span>(res &amp;&amp; res.id)&#123;
           <span class="hljs-keyword">this</span>.courseMarketForm = res;
        &#125;
      &#125;);

methods: &#123;
	save: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-keyword">this</span>.$refs.courseMarketForm.validate(<span class="hljs-function">(<span class="hljs-params">valid</span>) =&gt;</span> &#123;
          <span class="hljs-keyword">if</span> (valid) &#123;
            <span class="hljs-keyword">this</span>.$confirm(<span class="hljs-string">'确认提交吗？'</span>, <span class="hljs-string">'提示'</span>, &#123;&#125;).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;
              courseApi.updateCourseMarket(<span class="hljs-keyword">this</span>.courseid,<span class="hljs-keyword">this</span>.courseMarketForm).then(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;
               <span class="hljs-keyword">this</span>.editLoading = <span class="hljs-literal">false</span>;
               <span class="hljs-keyword">if</span>(res.success)&#123;
                 <span class="hljs-keyword">this</span>.$message.success(<span class="hljs-string">'提交成功'</span>);
                 <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.dotype == <span class="hljs-string">'1'</span>)&#123;
                   <span class="hljs-comment">//跳转到课程图片</span>
                   <span class="hljs-keyword">this</span>.$router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">'/course/add/plan/3/1/'</span>+<span class="hljs-keyword">this</span>.courseid&#125;)
                 &#125;
               &#125;<span class="hljs-keyword">else</span>&#123;
                 <span class="hljs-keyword">this</span>.$message.error(<span class="hljs-string">'提交失败'</span>);
               &#125;
               &#125;);
            &#125;);
          &#125;
        &#125;);
      &#125;</code></pre></div>

<h2 id="3-Api接口"><a href="#3-Api接口" class="headerlink" title="3.Api接口"></a>3.Api接口</h2><p>课程营销需要如下接口：</p>
<p>1、根据id查询课程营销信息</p>
<p>2、修改课程营销信息提交</p>
<p>接口定义如下：</p>
<ol>
<li>根据课程ID查询课程营销信息</li>
</ol>
<div class="hljs"><pre><code class="hljs arduino">@ApiOperation(<span class="hljs-string">"获取课程营销信息"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> CourseMarket <span class="hljs-title">getCourseMarketById</span><span class="hljs-params">(<span class="hljs-keyword">String</span> CourseMarketId)</span></span>;</code></pre></div>

<p>2）修改课程营销信息</p>
<div class="hljs"><pre><code class="hljs reasonml">@<span class="hljs-constructor">ApiOperation(<span class="hljs-string">"更新或添加课程营销信息"</span>)</span>
public ResponseResult update<span class="hljs-constructor">CourseMarket(String <span class="hljs-params">id</span>,CourseMarket <span class="hljs-params">courseMarket</span>)</span>;</code></pre></div>

<h2 id="4-服务端-1"><a href="#4-服务端-1" class="headerlink" title="4. 服务端"></a>4. 服务端</h2><h3 id="Dao-4"><a href="#Dao-4" class="headerlink" title="Dao"></a>Dao</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CourseMarketRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JpaRepository</span>&lt;<span class="hljs-title">CourseMarket</span>,<span class="hljs-title">String</span>&gt; </span>&#123;
&#125;</code></pre></div>

<h3 id="Service-4"><a href="#Service-4" class="headerlink" title="Service"></a>Service</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CourseMarketService</span> </span>&#123;

    <span class="hljs-meta">@Autowired</span>
    CourseMarketRepository courseMarketRepository;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> CourseMarket <span class="hljs-title">getCourseMarketById</span><span class="hljs-params">(String courseMarketId)</span> </span>&#123;
        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(courseMarketId))&#123;
            ExceptionCast.cast(CommonCode.INVALID_PARAM);
        &#125;
        Optional&lt;CourseMarket&gt; optional = courseMarketRepository.findById(courseMarketId);
        <span class="hljs-keyword">if</span> (optional.isPresent())&#123;
            <span class="hljs-keyword">return</span> optional.get();
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    &#125;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title">updateCourseMarket</span><span class="hljs-params">(String id, CourseMarket courseMarket)</span> </span>&#123;
        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(id))&#123;
            ExceptionCast.cast(CommonCode.INVALID_PARAM);
        &#125;
        <span class="hljs-keyword">if</span> (courseMarket == <span class="hljs-keyword">null</span>)&#123;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
        &#125;
        CourseMarket courseMarketOld = <span class="hljs-keyword">this</span>.getCourseMarketById(id);
        <span class="hljs-keyword">if</span> (courseMarketOld == <span class="hljs-keyword">null</span>)&#123;
            courseMarketRepository.save(courseMarket);
        &#125;<span class="hljs-keyword">else</span> &#123;
            BeanUtils.copyProperties(courseMarket,courseMarketOld);
            courseMarketRepository.save(courseMarketOld);

        &#125;

        <span class="hljs-keyword">return</span> ResponseResult.SUCCESS();


    &#125;
&#125;</code></pre></div>

<h3 id="Controller-4"><a href="#Controller-4" class="headerlink" title="Controller"></a>Controller</h3><div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-meta">@GetMapping</span>(<span class="hljs-string">"/market/get/&#123;id&#125;"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> CourseMarket <span class="hljs-title">getCourseMarketById</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> String CourseMarketId) </span>&#123;
    <span class="hljs-keyword">return</span> courseMarketService.getCourseMarketById(CourseMarketId);
&#125;

<span class="hljs-meta">@Override</span>
<span class="hljs-meta">@PutMapping</span>(<span class="hljs-string">"market/update/&#123;id&#125;"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title">updateCourseMarket</span><span class="hljs-params">(@PathVariable(<span class="hljs-string">"id"</span>)</span> String id,</span>
<span class="hljs-function">                                         @RequestBody CourseMarket courseMarket) </span>&#123;
    <span class="hljs-keyword">return</span> courseMarketService.updateCourseMarket(id,courseMarket);
&#125;</code></pre></div>

<h2 id="5-前端-1"><a href="#5-前端-1" class="headerlink" title="5.前端"></a>5.前端</h2><h3 id="API方法-1"><a href="#API方法-1" class="headerlink" title="API方法"></a>API方法</h3><div class="hljs"><pre><code class="hljs js"><span class="hljs-comment">//获取课程营销信息</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getCourseMarketById = <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestQuickGet(apiUrl + <span class="hljs-string">'/course/market/get/'</span>+id)
&#125;
<span class="hljs-comment">//更新或添加课程营销信息</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> updateCourseMarket= <span class="hljs-function">(<span class="hljs-params">id,courseMarket</span>) =&gt;</span> &#123;
  <span class="hljs-keyword">return</span> http.requestPut(apiUrl+<span class="hljs-string">'/course/market/update/'</span>+id,courseMarket)
&#125;</code></pre></div>

<h3 id="测试-3"><a href="#测试-3" class="headerlink" title="测试"></a>测试</h3><p><img src="/2020/08/13/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday07/17.png" srcset="/img/loading.gif" alt></p>
<p>修改方法也通过。</p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BF/">学成在线</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/MyBatis/">MyBatis</a>
                    
                      <a class="hover-with-bg" href="/tags/Spring-Data-MongoDB/">Spring Data MongoDB</a>
                    
                      <a class="hover-with-bg" href="/tags/Spring-Data-Jpa/">Spring Data Jpa</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/08/12/%E5%AD%A6%E6%88%90%E5%9C%A8%E7%BA%BFday06/">
                        <span class="hidden-mobile">学成在线day06</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>
<!--

代码块js 用不到，fulid自带有，添加css样式即可实现
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 

<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>

-->




<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键字</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
	<div>
  <span id="timeDate">载入天数...</span>
  <span id="times">载入时分秒...</span>
  <script>
  var now = new Date();
  function createtime(){
      var grt= new Date("06/20/2020 00:00:00");//此处修改你的建站时间或者网站上线时间
      now.setTime(now.getTime()+250);
      days = (now - grt ) / 1000 / 60 / 60 / 24;
      dnum = Math.floor(days);
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum);
      hnum = Math.floor(hours);
      if(String(hnum).length ==1 ){
          hnum = "0" + hnum;
      }
      minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes);
      if(String(mnum).length ==1 ){
                mnum = "0" + mnum;
      }
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds);
      if(String(snum).length ==1 ){
                snum = "0" + snum;
      }
      document.getElementById("timeDate").innerHTML = "本站勉强运行&nbsp"+dnum+"&nbsp天";
      document.getElementById("times").innerHTML = hnum + "&nbsp小时&nbsp" + mnum + "&nbsp分&nbsp" + snum + "&nbsp秒";
  }
  setInterval("createtime()",250);
  </script>
</div>
    
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


    
  <!-- 备案信息 -->
  <div class="beian">
    <a href="http://beian.miit.gov.cn/" target="_blank"
       rel="nofollow noopener">京ICP证123456号</a>
    
      <a
        href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=12345678"
        rel="nofollow noopener"
        class="beian-police"
        target="_blank"
      >
        <span class="beian-police-sep">&nbsp;|&nbsp;</span>
        
          <img src="/img/police_beian.png" srcset="/img/loading.gif" alt="police-icon" />
        
        <span>京公网安备12345678号</span>
      </a>
     
  </div>


    
	
  </div>
  

</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>



  
<script src="/js/custom.js"></script>




  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "学成在线day07&nbsp;",
      ],
      cursorChar: "|",
      typeSpeed: 65,
      loop: true,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "<"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  
















<script type="text/javascript"
color="107,160,220" opacity='0.7' zIndex="-2" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
